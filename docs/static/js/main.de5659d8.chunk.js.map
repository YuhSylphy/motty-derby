{"version":3,"sources":["features/family/components/FamilyDiagram.tsx","features/family/Family.tsx","features/errors/404.tsx","features/horse-defs/core/ducks.ts","features/indicator/core/ducks.ts","features/indicator/core/util.ts","features/indicator/components/Indicator.tsx","features/horse-defs/core/horse.ts","features/horse-defs/core/epic.ts","features/pedigree/core/ducks.ts","features/pedigree/component/PedigreeTable.tsx","features/pedigree/component/PedigreeDialog.tsx","features/mare-line/components/MareLineTree.tsx","features/mare-line/components/MareLine.tsx","features/changelog/components/ChangeLog.tsx","features/changelog/core/ducks.ts","features/changelog/core/epic.ts","features/changelog/core/logic.ts","App.tsx","app/store.ts","serviceWorker.ts","index.tsx"],"names":["FamilyDiagram","d3Container","useRef","defs","useSelector","state","horseDefs","list","data","useMemo","nodes","Map","edges","forEach","def","owned","listed","set","name","label","class","sex","motherName","has","push","v","w","fatherName","Array","from","entries","prepareGraph","useEffect","current","svg","d3","selectAll","remove","length","g","dagreD3","Graph","setGraph","rankdir","setDefaultEdgeLabel","n","setNode","node","rx","ry","e","setEdge","render","svgGroup","append","zoom","on","attr","transform","call","xCenterOffset","Number","graph","width","isNaN","className","height","ref","Family","Box","Typography","variant","Paper","Http404","horseDefsSlice","createSlice","initialState","reducers","init","draft","action","payload","actions","reducer","slice","awaits","open","key","close","target","rest","console","warn","indicatorActions","withIndicator","input","action$","pipe","mergeMap","concat","of","defer","useStyles","makeStyles","theme","backdrop","zIndex","drawer","color","Indicator","classes","indicator","waiting","Object","values","some","x","Backdrop","CircularProgress","lineMap","Uk","Ec","Ph","Ns","Ro","Ne","Na","Fa","To","Te","Sw","Ha","Hi","St","Ma","He","flatten","childName","show","fathers","father","mothers","mother","line","memo","flat","fetchOwned","fetch","process","then","res","json","filter","removed","map","fetchBroodmare","fetchStallion","epic","combineEpics","ofType","horseDefsActions","type","a","func","mergeAll","groupBy","group","reduce","lhs","rhs","toArray","tap","m","complementLine","get","toPromise","displays","pop","_","clear","createStyles","table","backgroundColor","palette","primary","contrastText","cols","row","TableRow","ix","cell","col","threshold","limit","flatMap","join","TableCell","rowSpan","renderCell","PedigreeTable","array","generation","mapPedigree","construct","TableContainer","component","Table","size","TableBody","PedigreeDialog","dispatch","useDispatch","pedigree","find","handleClose","pedigreeActions","Dialog","onClose","DialogTitle","style","paddingLeft","root","marginLeft","spacing","InformationIcon","handleClick","IconButton","aria-label","onClick","fontSize","fetchOrCreateNode","id","created","children","icon","faMars","faVenus","faQuestion","setNodeProperty","value","ids","keys","renderTree","toggleExpand","TreeItem","nodeId","onIconClick","MareLineTree","useState","expanded","setExpanded","withIndicatorSync","_event","includes","TreeView","defaultCollapseIcon","defaultExpandIcon","defaultEndIcon","paper","padding","MareLine","ChangeLog","article","changeLog","changeLogActions","source","text","renderListItem","ListItem","button","Link","to","path","ListItemIcon","ListItemText","page","Timeline","ChangeHistory","MenuList","toggleMenu","List","onKeyDown","Header","menuOpen","setMenuOpen","Fragment","AppBar","position","Toolbar","edge","MenuOutlined","Drawer","Footer","useTheme","display","justifyContent","margin","href","App","basename","exact","epicMiddleware","createEpicMiddleware","dependencies","store","configureStore","horseDefsReducer","indicatorReducer","pedigreeReducer","changeLogReducer","middleware","getDefaultMiddleware","thunk","run","horseDefsEpic","changeLogEpic","Boolean","window","location","hostname","match","createMuiTheme","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"wVAyDaA,EAA0B,WACtC,IAAMC,EAAcC,iBAA6B,MAE3CC,EAAOC,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUC,QACzDC,EAAOC,mBAAQ,kBAhDD,SAACN,GACrB,IAAMO,EAAQ,IAAIC,IACZC,EAAiC,GAuCvC,OArCAT,EAAKU,SAAQ,SAACC,IACRA,EAAIC,OAAUD,EAAIE,UAIvBN,EAAMO,IAAIH,EAAII,KAAM,CACnBC,MAAOL,EAAII,KACXE,MAAM,SAAD,OAAWN,EAAIO,OAIjBP,EAAIQ,aAEFZ,EAAMa,IAAIT,EAAIQ,aAClBZ,EAAMO,IAAIH,EAAIQ,WAAY,CACzBH,MAAOL,EAAIQ,WACXF,MAAO,oBAKTR,EAAMY,KAAK,CAAC,CAAEC,EAAGX,EAAIQ,WAAYI,EAAGZ,EAAII,MAAQ,CAAEE,MAAO,aAGtDN,EAAIa,aACFjB,EAAMa,IAAIT,EAAIa,aAClBjB,EAAMO,IAAIH,EAAIa,WAAY,CACzBR,MAAOL,EAAIa,WACXP,MAAO,kBAKTR,EAAMY,KAAK,CAAC,CAAEC,EAAGX,EAAIa,WAAYD,EAAGZ,EAAII,MAAQ,CAAEE,MAAO,iBAIpD,CAAEV,MAAOkB,MAAMC,KAAKnB,EAAMoB,WAAYlB,SAOlBmB,CAAa5B,KAAO,CAACA,IA2DhD,OAzDA6B,qBAAU,WACT,GAAK/B,EAAYgC,QAAjB,CAGA,IAAMC,EAAMC,SAAwClC,EAAYgC,SAGhE,GAFAC,EAAIE,UAAU,KAAKC,SAEO,IAAtB7B,EAAKE,MAAM4B,QAAsC,IAAtB9B,EAAKI,MAAM0B,OAA1C,CAIA,IAAMC,GAAI,IAAIC,WAAiBC,OAC7BC,SAAS,CACTC,QAAS,OAETC,qBAAoB,iBAAO,MAI7BpC,EAAKE,MAAMG,SAAQ,SAACgC,GACnBN,EAAEO,QAAQD,EAAE,GAAIA,EAAE,OAGnBN,EAAE7B,QAAQG,SAAQ,SAAUY,GAC3B,IAAMsB,EAAOR,EAAEQ,KAAKtB,GAEpBsB,EAAKC,GAAKD,EAAKE,GAAK,KAIrBzC,EAAKI,MAAMC,SAAQ,SAACqC,GACnBX,EAAEY,QAAQD,EAAE,GAAIA,EAAE,OAInB,IAAME,EAAS,IAAIZ,SACba,EAAWnB,EAAIoB,OAAO,KAGtBC,EAAOpB,SAAwCqB,GAAG,QAAQ,WAC/DH,EAASI,KAAK,YAAatB,QAASuB,cAErCxB,EAAIyB,KAAKJ,GAGTH,EAAOjB,SAAU,SAAWI,GAG5B,IAAMqB,GACJC,OAAO3B,EAAIuB,KAAK,WAAalB,EAAEuB,QAAQC,OAAS,IAAM,EACxDV,EAASI,KACR,YADD,oBAEcI,OAAOG,MAAMJ,GAAiB,EAAIA,EAFhD,cAKE,CAAC3D,EAAaO,IAGhB,cAAC,WAAD,UACC,qBACCyD,UAAU,kCACVF,MAAM,OACNG,OAAO,OACPC,IAAKlE,OC1HImE,EAAmB,WAC/B,OACC,eAACC,EAAA,EAAD,WACC,cAACC,EAAA,EAAD,CAAYC,QAAQ,KAApB,0BACA,cAACC,EAAA,EAAD,UACC,cAAC,EAAD,UCPSC,EAAoB,WAChC,OAAO,gD,qICIFC,EAAiBC,YAAY,CAClCzD,KAAM,YACN0D,aAAc,CAAErE,KAAM,IACtBsE,SAAU,CACTC,KAAM,aACN7D,IAAK,SAAC8D,EAAOC,GACZD,EAAMxE,KAAOyE,EAAOC,QAAQ1E,SAKhB2E,EAAqBR,EAArBQ,QAASC,EAAYT,EAAZS,Q,sECZlBC,EAAQT,YAAY,CACzBzD,KAAM,YACN0D,aAAc,CAAES,OAAQ,IACxBR,SAAU,CACT5D,IAAK,SAAC8D,EAAOC,GACZD,EAAMM,OAASL,EAAOC,SAEvBK,KAAM,SAACP,EAAD,GAAqD,IAAlCQ,EAAiC,EAA1CN,QACfF,EAAMM,OAAN,2BACIN,EAAMM,QADV,kBAEEE,EAAM,GAAKA,KAAOR,EAAMM,OAASN,EAAMM,OAAOE,GAAO,MAGxDC,MAAO,SAACT,EAAD,GAAqD,IAAlCQ,EAAiC,EAA1CN,QAChB,GAAMM,KAAOR,EAAMM,OAAnB,CAD0D,MAKvBN,EAAMM,OAA1BI,EAL2C,EAKjDF,GAAiBG,EALgC,eAKjDH,GALiD,UAM1DR,EAAMM,OAAN,2BACIK,GACCD,EAAS,EAAT,eAAgBF,EAAME,EAAS,GAAM,SANzCE,QAAQC,KAAR,0BAAgCL,EAAhC,cAYWL,EAAqBE,EAArBF,QAASC,EAAYC,EAAZD,Q,qCCpBhBG,GAAgBO,EAAhBP,KAAME,GAAUK,EAAVL,MAKDM,GAAgB,SAI5B3E,EACA4E,GAL4B,OAMmC,SAACC,GAAD,OAC/DA,EAAQC,KACPC,cAAS,SAAClB,GAAD,OACRmB,YACCC,YAAGd,GAAKnE,IACRkF,aAAM,kBAAMN,EAAMf,MAClBoB,YAAGZ,GAAMrE,W,8BCzBPmF,GAAYC,cAAW,SAACC,GAAD,MAAY,CACxCC,SAAU,CACTC,OAAQF,EAAME,OAAOC,OAAS,EAC9BC,MAAO,YAIIC,GAAsB,WAClC,IAAMC,EAAUR,KACRjB,EAAWjF,aAAY,SAACC,GAAD,OAAsBA,EAAM0G,aAAnD1B,OAEF2B,EAAUvG,mBAAQ,kBAAMwG,OAAOC,OAAO7B,GAAQ8B,MAAK,SAACC,GAAD,OAAOA,EAAI,OAAI,CACvE/B,IAGD,OACC,cAACgC,GAAA,EAAD,CAAUpD,UAAW6C,EAAQL,SAAUnB,KAAM0B,EAA7C,SACC,cAACM,GAAA,EAAD,CAAkBV,MAAM,e,4DCQdW,GAAgD,CAC5DC,GAAI,CAAErG,MAAO,0CACbsG,GAAI,CAAEtG,MAAO,kCACbuG,GAAI,CAAEvG,MAAO,kCACbwG,GAAI,CAAExG,MAAO,kCACbyG,GAAI,CAAEzG,MAAO,gEACb0G,GAAI,CAAE1G,MAAO,oDACb2G,GAAI,CAAE3G,MAAO,0DACb4G,GAAI,CAAE5G,MAAO,wCACb6G,GAAI,CAAE7G,MAAO,kCACb8G,GAAI,CAAE9G,MAAO,sBACb+G,GAAI,CAAE/G,MAAO,8CACbgH,GAAI,CAAEhH,MAAO,kCACbiH,GAAI,CAAEjH,MAAO,4BACbkH,GAAI,CAAElH,MAAO,8CACbmH,GAAI,CAAEnH,MAAO,kCACboH,GAAI,CAAEpH,MAAO,uBAyCRqH,GAAU,SAAVA,EACL1H,EADe,GAGE,IAAD,YADdO,EACc,EADdA,IAAKL,EACS,EADTA,OAAQyH,EACC,EADDA,UAETvH,EAAI,UACTJ,EAAII,YADK,kBAENuH,GAFM,OAEc,WAARpH,EAAmB,SAAc,SAARA,EAAiB,SAAM,UAC1DqH,OAAoB,IAAb5H,EAAII,KAEXyH,EAAU7H,EAAI8H,OACjBJ,EAAQ1H,EAAI8H,OAAQ,CAAEvH,IAAK,OAAQoH,UAAWvH,IAC9C,GACG2H,EAAU/H,EAAIgI,OACjBN,EAAQ1H,EAAIgI,OAAQ,CAAEzH,IAAK,SAAUoH,UAAWvH,IAChD,GAeH,MAAO,CAZkB,CACxBA,OACA6H,KAJS,oBAAGjI,EAAIiI,YAAP,eAAeJ,QAAf,IAAeA,GAAf,UAAeA,EAAU,UAAzB,aAAe,EAAcI,YAA7B,QAAqC,KAK9C/H,SAAUA,EACVD,OAAO,EACP2H,OACA/G,WAAU,OAAEgH,QAAF,IAAEA,GAAF,UAAEA,EAAU,UAAZ,aAAE,EAAczH,KAC1BI,WAAU,OAAEuH,QAAF,IAAEA,GAAF,UAAEA,EAAU,UAAZ,aAAE,EAAc3H,KAC1B8H,KAAM,GACN3H,OAGesH,EAASE,GAASI,QAG7BC,GAEL,kBACCC,MAAM,GAAD,OAAIC,eAAJ,4BACHC,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAAC7I,GAAD,OACLA,EACEgJ,QAAO,SAAC1I,GAAD,OAAUA,EAAI2I,WACrBC,KAAI,SAAC5I,GAAD,yBAAC,eACFA,GADC,IAEJE,SAAUF,EAAIE,OACdD,OAAO,EACP2H,MAAM,EACNM,KAAI,UAAElI,EAAIkI,YAAN,QAAc,YAOlBW,GAAiB,kBACtBR,MAAM,GAAD,OAAIC,eAAJ,4BACHC,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAAC7I,GAAD,OACLA,EACEkJ,KAAI,SAAC5I,GAAD,OACJ0H,GAAQ1H,EAAK,CAAEO,IAAK,SAAUL,QAAQ,EAAMyH,UAAW,WAEvDQ,WAMCW,GAAgB,kBACrBT,MAAM,GAAD,OAAIC,eAAJ,2BACHC,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAAC7I,GAAD,OACLA,EACEkJ,KAAI,SAAC5I,GAAD,OACJ0H,GAAQ1H,EAAK,CAAEO,IAAK,OAAQL,QAAQ,EAAMyH,UAAW,WAErDQ,WC/IQY,GAAOC,aAThB,SAAC9D,GAAD,OACHA,EACE+D,OAAOC,EAAiBlF,KAAKmF,MAC7BhE,KACAH,GAAc,mBAAD,sBAAqB,sBAAAoE,EAAA,kEACjCF,EADiC,SD2JpC5D,YAAG8C,GAAYU,GAAeD,IAC5B1D,KACAC,cAAS,SAACiE,GAAD,OAAUA,OACnBC,eACAC,cAAQ,SAACvJ,GAAD,OAASA,EAAII,QACrBgF,cAAS,SAACoE,GAAD,OACRA,EAAMrE,KACLsE,cAAO,SAACC,EAAKC,GAAN,kBAAe,CACrBvJ,KAAI,UAAEsJ,EAAItJ,YAAN,QAAcuJ,EAAIvJ,KACtBG,IAAG,UAAEmJ,EAAInJ,WAAN,QAAaoJ,EAAIpJ,IACpBL,OAAQwJ,EAAIxJ,QAAUyJ,EAAIzJ,OAC1B0H,KAAM8B,EAAI9B,MAAQ+B,EAAI/B,KACtB3H,MAAOyJ,EAAIzJ,OAAS0J,EAAI1J,MACxBgI,KAAmB,OAAbyB,EAAIzB,KAAgB0B,EAAI1B,KAAOyB,EAAIzB,KACzCC,KAAK,GAAD,oBAAMwB,EAAIxB,MAAV,aAAmByB,EAAIzB,OAC3BrH,WAAU,UAAE6I,EAAI7I,kBAAN,QAAoB8I,EAAI9I,WAClCL,WAAU,UAAEkJ,EAAIlJ,kBAAN,QAAoBmJ,EAAInJ,mBAIrCoJ,eACAC,cAAI,SAACxK,GACJ,IAAMyK,EAAI,IAAIjK,IAAsBR,EAAKuJ,KAAI,SAAC5I,GAAD,MAAS,CAACA,EAAII,KAAMJ,OA8BjEX,EAAKU,SA3BkB,SAAjBgK,EAAkB/J,GAAmB,IAAD,IAEzC,IAAIA,EAAIiI,MAAqB,OAAbjI,EAAIiI,KAApB,CAKA,GAAIjI,EAAIa,WAAY,CACnB,IAAMiH,EAASgC,EAAEE,IAAIhK,EAAIa,YACrBiH,EACHiC,EAAejC,GAEfjD,QAAQC,KAAR,UACI9E,EAAIa,WADR,uBACiCb,EAAII,KADrC,yBAECJ,EACA8J,GAMH9J,EAAIiI,KAAJ,oBAAW6B,EAAEE,IAAIhK,EAAIa,YAAc,WAAnC,aAAW,EAA6BoH,YAAxC,QAAgD,KAE/B,OAAbjI,EAAIiI,MACPpD,QAAQC,KAAR,oCAA0C9E,EAAII,eAMjD6J,YClNkC,gCACVxK,KADU,6BAChBU,IADgB,iE,sICP/BmE,GAAQT,YAAY,CACzBzD,KAAM,WACN0D,aAAc,CAAEoG,SAAU,IAC1BnG,SAAU,CACT5D,IAAK,SAAC8D,EAAOC,GACZD,EAAMiG,SAAWhG,EAAOC,SAEzBzD,KAAM,SAACuD,EAAD,GAAqD,IAAlCQ,EAAiC,EAA1CN,QACfF,EAAMiG,SAASxJ,KAAK+D,IAErB0F,IAAK,SAAClG,EAAOmG,GACRnG,EAAMiG,SAAS1I,QAAU,EAC5BqD,QAAQC,KAAR,0BAGDb,EAAMiG,SAASC,OAEhBE,MAAO,SAACpG,EAAOmG,GACdnG,EAAMiG,SAAW,OAKL9F,GAAqBE,GAArBF,QAASC,GAAYC,GAAZD,Q,sECAlBmB,GAAYC,cAAW,SAACC,GAAD,OAC5B4E,aAAa,CACZC,MAAO,CACN,UAAW,CACVC,gBAAiB,OACjB,UAAW,CACVA,gBAAiB,aAElB,OAAQ,CACPA,gBAAiB,WAElB,OAAQ,CACPA,gBAAiB,WAElB,OAAQ,CACPA,gBAAiB,WAElB,OAAQ,CACPA,gBAAiB,WAElB,OAAQ,CACPA,gBAAiB,WAElB,OAAQ,CACPA,gBAAiB,WAElB,OAAQ,CACPA,gBAAiB,WAElB,OAAQ,CACPA,gBAAiB,WAElB,OAAQ,CACP1E,MAAOJ,EAAM+E,QAAQC,QAAQC,aAC7BH,gBAAiB,WAElB,OAAQ,CACPA,gBAAiB,WAElB,OAAQ,CACPA,gBAAiB,WAElB,OAAQ,CACP1E,MAAOJ,EAAM+E,QAAQC,QAAQC,aAC7BH,gBAAiB,WAElB,OAAQ,CACPA,gBAAiB,WAElB,OAAQ,CACPA,gBAAiB,WAElB,OAAQ,CACPA,gBAAiB,WAElB,WAAY,CACX1E,MAAOJ,EAAM+E,QAAQC,QAAQC,aAC7BH,gBAAiB,kBAkHhBlI,GAAS,SAAC5C,GACf,OACC,cAAC,WAAD,UACEA,EAAKkJ,KAAI,SAACgC,EAAMC,GAAP,OACT,eAACC,GAAA,EAAD,WACEF,EACClC,QAAO,SAAC0B,EAAGW,GAAJ,OAAWA,EAAK,KACvBnC,KAAI,SAACoC,EAAMC,GAAP,OAnDQ,SAClBJ,EACAI,EACAD,GAEA,IAAME,EAAS,SAAG,EAnEL,EAmEmBD,EAAM,GAChC9H,EAAY,CACjB,OACC6H,EAAKpD,KAAiBoD,EAAK/C,KAAf,QACL,IAARgD,GAAaJ,IAAG,SAAK,EAAMM,GAAa,CAAC,UAAY,IAEpDC,SAAQ,SAAC9E,GAAD,OAAOA,KACf+E,KAAK,KACP,OACC,cAAC,WAAD,UACER,EAAMK,IAAc,EACpB,cAACI,GAAA,EAAD,CAAWC,QAASL,EAAW/H,UAAWA,EAA1C,SACE6H,EAAKpD,KACL,cAACpE,EAAA,EAAD,CAAYC,QAAQ,QAApB,SAA6BuH,EAAK5K,OAC/B,OAEF,MAPL,cAA4B6K,IAqCJO,CAAWX,EAAKI,EAAKD,MACzCH,EAAM,IAAM,GA1BE5C,EA0Ba2C,EAAKA,EAAKpJ,OAAS,GAAGyG,KAzBtC,OAATA,EACN,cAACqD,GAAA,EAAD,CAECnI,UAAW,CAAC,OAAQ8E,GAAMoD,KAAK,KAC/BE,QAAS,EAHV,SAKC,eAAC/H,EAAA,EAAD,CAAYC,QAAQ,QAApB,UAA6BgD,GAAQwB,GAAM5H,MAA3C,aALD,YAQA,cAACiL,GAAA,EAAD,CAECnI,UAAW,CAAC,OAAQ,SAASkI,KAAK,KAClCE,QAAS,GAHV,aAgB6D,OAJ3D,cAAsBV,IAtBP,IAAC5C,QAiCPwD,GAA8C,SAAC,GAAa,IAAXzL,EAAU,EAAVA,IACvDgG,EAAUR,KACVnG,EAAOC,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUC,QAUzDiM,EApIW,SAAC9C,GAAD,OAAgC,SACjD5I,GAIA,IAFA,IAAMuK,EAAQ,IAAIzJ,MAET+J,EAAM,EAAGA,EAAG,SAAG,EAAMM,KAAcN,EAAK,CAEhD,IADA,IAAMD,EAAO,IAAI9J,MACRmK,EAAM,EAAGA,EARN,IAQqBA,EAChCL,EAAKlK,KAAK,CAAEN,KAAM,QAASuL,WAAYV,EAAKrD,MAAM,EAAOK,KAAM,OAEhEsC,EAAM7J,KAAKkK,GAgDZ,OA7CoB,SAAdgB,EAAef,EAAaI,EAAajL,GAQ9C,GAPAuK,EAAMM,GAAKI,GAAO,CACjB7K,KAAMJ,EAAII,KACVuL,WAAYV,EACZrD,OAAQ5H,EAAI4H,KACZK,KAAMjI,EAAIiI,MAGPgD,EAAM,EAtBE,EAsBS,CACpB,GAAIjL,EAAIa,WAGN+K,EAAYf,EAAKI,EAAM,EAFTrC,EAAIoB,IAAIhK,EAAIa,aAIA,CACzBT,KAAMJ,EAAIa,WACVN,IAAK,OACL0H,KAAM,KACN/H,QAAQ,EACR0H,MAAM,EACN3H,OAAO,EACPiI,KAAM,CAAC,wBAIV,GAAIlI,EAAIQ,WAAY,CACnB,IAAMwH,EAASY,EAAIoB,IAAIhK,EAAIQ,YAE1BoL,EAAYf,EAAG,SAAG,EA1CT,EA0CuBI,EAAM,GAAIA,EAAM,EAD7CjD,GAGgD,CAClD5H,KAAMJ,EAAIQ,WACVD,IAAK,SACL0H,KAAM,KACN/H,QAAQ,EACR0H,MAAM,EACN3H,OAAO,EACPiI,KAAM,CAAC,0BAOZ0D,CAAY,EAAG,EAAG5L,GACXuK,GA0EOsB,CATFlM,mBACX,kBACCN,EAAKoK,QACJ,SAACb,EAAK5I,GAAN,OAAc4I,EAAIzI,IAAIH,EAAII,KAAMJ,KAChC,IAAIH,OAEN,CAACR,IAGYwM,CAAe7L,GAE7B,OACC,cAAC8L,GAAA,EAAD,CAAgBC,UAAWrI,IAA3B,SACC,cAACsI,GAAA,EAAD,CAAO7I,UAAW6C,EAAQuE,MAAO0B,KAAK,QAAtC,SACC,cAACC,GAAA,EAAD,UAAY5J,GAAOoJ,UC7NVS,GAA2B,WACvC,IAAMC,EAAWC,cACTnC,EAAa5K,aAAY,SAACC,GAAD,OAAsBA,EAAM+M,YAArDpC,SACF1F,EAAO7E,mBAAQ,kBAAMuK,EAAS1I,OAAS,IAAG,CAAC0I,IAC3C7K,EAAOC,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUC,QACzDO,EAAML,mBACX,kBACCuK,EAAS1I,OAAS,EACfnC,EAAKkN,MAAK,SAACvM,GAAD,OAASA,EAAII,OAAS8J,EAASA,EAAS1I,OAAS,WAC3D,IACJ,CAACnC,EAAM6K,IAGFsC,EAAc7M,mBACnB,kBAAM,WACLyM,EAASK,GAAgBpC,YAE1B,CAAC+B,IAGF,OAAOpM,EACN,eAAC0M,GAAA,EAAD,CAAQlI,KAAMA,EAAMmI,QAASH,EAA7B,UACC,eAACI,GAAA,EAAD,WACC,eAACpJ,EAAA,EAAD,CAAYC,QAAQ,KAApB,iCAA+BzD,EAAII,QACrB,OAAbJ,EAAIiI,KACJ,eAACzE,EAAA,EAAD,CAAYC,QAAQ,KAAKoJ,MAAO,CAAEC,YAAa,OAA/C,iCACOrG,GAAQzG,EAAIiI,MAAM5H,MADzB,YAGG,QAEL,cAAC,GAAD,CAAeL,IAAKA,OAElB,MCjBCwF,GAAYC,cAAW,SAACC,GAAD,OAC5B4E,aAAa,CACZyC,KAAM,CACL,UAAW,CACVC,WAAYtH,EAAMuH,QAAQ,KAE3B,YAAa,CACZD,WAAYtH,EAAMuH,QAAQ,IAE3B,UAAW,CACVnH,MAAO,WAER,YAAa,CACZA,MAAO,WAER,aAAc,CACbA,MAAO,iBAMLoH,GAA8C,SAAC,GAAc,IAAZ9M,EAAW,EAAXA,KAChDgM,EAAWC,cACXc,EAAcxN,mBACnB,kBAAM,WACLyM,EAASK,GAAgB/L,KAAKN,OAE/B,CAACgM,EAAUhM,IAGZ,OACC,cAACgN,EAAA,EAAD,CAAYC,aAAW,aAAapB,KAAK,QAAQqB,QAASH,EAA1D,SACC,cAAC,KAAD,CAAkBI,SAAS,eA2CxB1B,GAAY,SAACxM,GAClB,IAAMuJ,EAAM,IAAI/I,IAEV2N,EAAoB,SAACC,GAAD,uBACzB7E,EAAIoB,IAAIyD,UADiB,QAExB,WAEA,IAAMC,EAAiB,CACtBD,KACApN,MAAO,cAAC,WAAD,IACPsN,SAAU,GACV1N,OAAO,GAGR,OADA2I,EAAIzI,IAAIsN,EAAIC,GACLA,EATP,IAwBF,OADArO,EAAKU,SAXU,SAACC,GACf,IAAMiC,EAAOuL,EAAkBxN,EAAII,OAxDb,SAAC6B,EAAajC,GAAmB,IAAD,IACvDiC,EAAKhC,MAAQgC,EAAKhC,OAASD,EAAIC,MAC/BgC,EAAKkB,UAAY,CAACnD,EAAIO,KAAK8K,KAAK,KAChCpJ,EAAK5B,MACJ,eAAC,WAAD,WACG,WACD,OAAQL,EAAIO,KACX,IAAK,OACJ,OAAO,cAAC,KAAD,CAAiBqN,KAAMC,OAC/B,IAAK,SACJ,OAAO,cAAC,KAAD,CAAiBD,KAAME,OAC/B,IAAK,UACJ,OAAO,cAAC,KAAD,CAAiBF,KAAMG,OAC/B,QAC0B/N,EAAIO,KAT9B,GAaF,uBAAM4C,UAAU,OAAhB,UACEnD,EAAII,KACL,cAAC,GAAD,CAAiBA,KAAMJ,EAAII,UAE3BJ,EAAIa,WACJ,eAAC,WAAD,eAEC,uBAAMsC,UAAU,cAAhB,UACEnD,EAAIa,WACL,cAAC,GAAD,CAAiBT,KAAMJ,EAAIa,gBAJ7B,OAQG,QAGNoB,EAAKpB,WAAL,UAAkBb,EAAIa,kBAAtB,QAAoCoB,EAAKpB,WACzCoB,EAAKzB,WAAL,UAAkBR,EAAIQ,kBAAtB,QAAoCyB,EAAKpB,WAuBxCmN,CAAgB/L,EAAMjC,GAElBA,EAAIQ,aACQgN,EAAkBxN,EAAIQ,YAC9BmN,SAASjN,KAAKuB,MAKhB,CACNrC,MAAOkB,MAAMC,KAAK6H,EAAIxC,UAAUsC,QAC/B,SAACuF,GAAD,aAECA,EAAMhO,SAEJgO,EAAMzN,aAENoI,EAAInI,IAAIwN,EAAMzN,aAEdoI,EAAInI,IAAIwN,EAAMzN,eAAe,UAACoI,EAAIoB,IAAIiE,EAAMzN,mBAAf,aAAC,EAA2BP,WAE7DiO,IAAKpN,MAAMC,KAAK6H,EAAIuF,UAIhBC,GAAa,SAAbA,EAAcC,GAAD,OAClB,SAA0BpM,GACzB,OACC,cAACqM,GAAA,EAAD,CACCnL,UAAWlB,EAAKkB,UAEhBoL,OAAQtM,EAAKwL,GACbpN,MAAO4B,EAAK5B,MACZmO,YAAaH,EAAapM,GAL3B,SAOEA,EAAK0L,SAAS/E,IAAIwF,EAAWC,KALzBpM,EAAKwL,MAUDgB,GAAyB,WACrC,IAAMzI,EAAUR,KACV4G,EAAWC,cAF4C,EAG7BqC,mBAAmB,IAHU,mBAGtDC,EAHsD,KAG5CC,EAH4C,KAKvDvP,EAAOC,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUC,QALF,EAMtCE,mBAAQ,WAC9B,OAAIN,EAAKmC,OAAS,EP7Ha,SAAC4K,GAAD,OAAmC,SACnE/L,GADmE,OAE/D,SAAIgJ,GACR,IAEC,OADA+C,EAAS5H,GAAKnE,IACPgJ,IAFR,QAIC+C,EAAS1H,GAAMrE,OOuHPwO,CAAkBzC,EAAlByC,CAA4B,iBAA5BA,EAA8C,kBACpDhD,GAAUxM,MAGJ,CAAEO,MAAO,GAAIsO,IAAK,MAExB,CAAC9B,EAAU/M,IARNO,EANqD,EAMrDA,MAAOsO,EAN8C,EAM9CA,IAUfhN,qBAAU,WACT0N,EAAYV,KACV,CAACU,EAAaV,IAEjB,IAAMG,EAAe1O,mBACpB,kBAAM,SAACsC,GAAD,OAAU,SAAC6M,GAChBF,EACCD,EAASI,SAAS9M,EAAKwL,IACpBkB,EAASjG,QAAO,SAAC+E,GAAD,OAAQA,IAAOxL,EAAKwL,MADvC,uBAEOkB,GAFP,CAEiB1M,EAAKwL,UAGxB,CAACkB,EAAUC,IAGZ,OACC,cAAC,WAAD,UACC,cAACI,GAAA,EAAD,CACC7L,UAAW6C,EAAQ+G,KACnB4B,SAAUA,EACVM,oBAAqB,cAAC,KAAD,IACrBC,kBAAmB,cAAC,KAAD,IACnBC,eAAgB,cAAC,KAAD,IALjB,SAOEvP,EAAMgJ,IAAIwF,GAAWC,SCrMpB7I,GAAYC,cAAW,SAACC,GAAD,OAC5B4E,aAAa,CACZ8E,MAAO,CACNC,QAAS3J,EAAMuH,QAAQ,SAKbqC,GAAqB,WACjC,IAAMtJ,EAAUR,KAChB,OACC,eAAC,WAAD,WACC,cAAChC,EAAA,EAAD,CAAYC,QAAQ,KAApB,gCACA,cAACC,EAAA,EAAD,CAAOP,UAAW6C,EAAQoJ,MAA1B,SACC,cAAC,GAAD,U,qBCPE5J,I,OAAYC,cAAW,SAACC,GAAD,OAC5B4E,aAAa,CACZ8E,MAAO,CACNC,QAAS3J,EAAMuH,QAAQ,UAKbsC,GAAsB,WAClC,IAAMvJ,EAAUR,KACV4G,EAAWC,cAETmD,EAAYlQ,aAAY,SAACC,GAAD,OAAsBA,EAAMkQ,aAApDD,QAKR,OAJAtO,qBAAU,WACTkL,EAASsD,GAAiB1L,UACxB,CAACoI,IAGH,cAAC,WAAD,UACC,cAAC1I,EAAA,EAAD,CAAOP,UAAW6C,EAAQoJ,MAA1B,SACc,KAAZI,EACA,cAAC,KAAD,CAAUG,OAAQH,EAASrM,UAAU,kBAClC,UC5BFmB,GAAQT,YAAY,CACzBzD,KAAM,aACN0D,aAAc,CAAE0L,QAAS,IACzBzL,SAAU,CACTC,KAAM,aACN7D,IAAK,SAAC8D,EAAOC,GACZD,EAAMuL,QAAUtL,EAAOC,YAKXC,GAAqBE,GAArBF,QAASC,GAAYC,GAAZD,QCCX0E,GAAOC,aAThB,SAAC9D,GAAD,OACHA,EACE+D,OAAOyG,GAAiB1L,KAAKmF,MAC7BhE,KACAH,GAAc,oBAAD,sBAAsB,sBAAAoE,EAAA,kEAClCsG,GADkC,SCZrCrH,MAAM,GAAD,OAAIC,eAAJ,0BAAmDC,MAAK,SAACC,GAAD,OAC5DA,EAAIoH,UDWgC,iDACjBzP,IADiB,iEE6BhC0P,I,OAAiB,SAAC7P,GACvB,OACC,eAAC8P,EAAA,EAAD,CAAyBC,QAAQ,EAAMhE,UAAWiE,IAAMC,GAAIjQ,EAAIkQ,KAAhE,UACC,cAACC,EAAA,EAAD,UAAenQ,EAAI4N,OACnB,cAACwC,EAAA,EAAD,CAAc1F,QAAS1K,EAAIK,UAFbL,EAAIkQ,QAOf7Q,GAAsB,CAC3B,CACCuO,KAAM,cAAC,IAAD,IACNvN,MAAO,qBACP6P,KAAM,aACNG,KAAM,cAAC,GAAD,KAEP,CACCzC,KAAM,cAAC0C,EAAA,EAAD,IACNjQ,MAAO,6BACP6P,KAAM,UACNG,KAAM,cAAC,EAAD,KAEP,CACCzC,KAAM,cAAC2C,EAAA,EAAD,IACNlQ,MAAO,2BACP6P,KAAM,cACNG,KAAM,cAAC,GAAD,MAIFG,GAED,SAAC,GAAoB,IAAlBC,EAAiB,EAAjBA,WACP,OACC,cAACC,EAAA,EAAD,CAAMpD,QAASmD,EAAYE,UAAWF,EAAtC,SACEpR,GAAKuJ,IAAIiH,OAKPe,GAAmB,WAAO,IAAD,EACElC,oBAAkB,GADpB,mBACvBmC,EADuB,KACbC,EADa,KAGxBL,EAAa9Q,mBAClB,kBAAM,WACLmR,GAAaD,MAEd,CAACA,EAAUC,IAGZ,OACC,eAAC,IAAMC,SAAP,WACC,cAACC,EAAA,EAAD,CAAQC,SAAS,SAAjB,SACC,eAACC,EAAA,EAAD,WACC,cAAC9D,EAAA,EAAD,CACC+D,KAAK,QACLrL,MAAM,UACNuH,aAAW,OACXC,QAASmD,EAJV,SAMC,cAACW,EAAA,EAAD,MAED,cAAC5N,EAAA,EAAD,CAAYC,QAAQ,KAApB,8BAIF,cAAC4N,EAAA,EAAD,CAAQ7M,KAAMqM,EAAUlE,QAAS8D,EAAjC,SACC,cAAC,GAAD,CAAUA,WAAYA,UAMpBa,GAAmB,WACxB,IAAM5L,EAAQ6L,cACd,OACC,cAAChO,EAAA,EAAD,CAAKiO,QAAQ,OAAOC,eAAe,WAAWC,OAAQhM,EAAMuH,QAAQ,IAApE,SACC,cAAC,IAAD,CAAQ0E,KAAK,2CAA2ChN,OAAO,UAA/D,sBAOUiN,GAAgB,WAC5B,IAAMlM,EAAQ6L,cACRnF,EAAWC,cAMjB,OAJAnL,qBAAU,WACTkL,EAASlD,EAAiBlF,UACxB,CAACoI,IAGH,cAAC,IAAD,CAAeyF,SAAUvJ,eAAzB,SACC,eAAC,IAAMyI,SAAP,WACC,cAAC,GAAD,IACA,cAACxN,EAAA,EAAD,CAAKmO,OAAQhM,EAAMuH,QAAQ,IAA3B,SACC,eAAC,IAAD,WACE5N,GAAKuJ,KAAI,gBAAGsH,EAAH,EAAGA,KAAMG,EAAT,EAASA,KAAT,OACT,cAAC,IAAD,CAAkBH,KAAMA,EAAxB,SACEG,GADUH,MAIb,cAAC,IAAD,CAAO4B,OAAK,EAAC5B,KAAK,IAAlB,SACC,cAAC,IAAD,CAAUD,GAAG,iBAEd,cAAC,IAAD,UACC,cAAC,EAAD,WAIH,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,U,UCjJE8B,GAAiBC,aAKrB,CACDC,aAPoB,KAURC,GAAQC,YAAe,CACnC9N,QAAS,CACR7E,UAAW4S,EACXnM,UAAWoM,EACX/F,SAAUgG,GACV7C,UAAW8C,IAEZC,WAAY,SAACC,GAAD,OACXA,EAAqB,CACpBC,OAAO,IACLrN,OAAO,CAAC0M,QAGbA,GAAeY,IAAI3J,YAAa4J,GAAeC,KCpB3BC,QACU,cAA7BC,OAAOC,SAASC,UAEc,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACxB,2DCTH,IAAMxN,GAAQyN,YAAe,IAE7BC,IAAS9Q,OACR,cAAC,IAAM+Q,WAAP,UACC,cAAC,IAAD,CAAkB3N,MAAOA,GAAzB,SACC,cAAC,IAAD,CAAUwM,MAAOA,GAAjB,SACC,cAAC,GAAD,UAIHoB,SAASC,eAAe,SDqHpB,kBAAmBC,WACtBA,UAAUC,cAAcC,MACtBnL,MAAK,SAACoL,GACNA,EAAaC,gBAEbC,OAAM,SAACC,GACPjP,QAAQiP,MAAMA,EAAMC,c","file":"static/js/main.de5659d8.chunk.js","sourcesContent":["import * as React from 'react';\nimport { useEffect, useMemo, useRef } from 'react';\nimport * as d3 from 'd3';\nimport * as dagreD3 from 'dagre-d3';\nimport * as graphlib from 'graphlib';\n\nimport { HorseDef } from '../../horse-defs';\n\nimport './FamilyDiagram.css';\nimport { Edge } from 'dagre-d3';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../../app/store';\n\nconst prepareGraph = (defs: HorseDef[]) => {\n\tconst nodes = new Map<string, dagreD3.Label>();\n\tconst edges: [Edge, dagreD3.Label][] = [];\n\n\tdefs.forEach((def) => {\n\t\tif (!def.owned && !def.listed) {\n\t\t\treturn;\n\t\t}\n\t\t// 定義された馬本体\n\t\tnodes.set(def.name, {\n\t\t\tlabel: def.name,\n\t\t\tclass: `owned ${def.sex}`,\n\t\t});\n\n\t\t// 母親\n\t\tif (def.motherName) {\n\t\t\t// 未登録なら非所持馬として追加\n\t\t\tif (!nodes.has(def.motherName)) {\n\t\t\t\tnodes.set(def.motherName, {\n\t\t\t\t\tlabel: def.motherName,\n\t\t\t\t\tclass: 'anothers female',\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// TODO: 所持馬扱いに書き換える\n\t\t\t}\n\t\t\tedges.push([{ v: def.motherName, w: def.name }, { class: 'mother' }]);\n\t\t}\n\n\t\tif (def.fatherName) {\n\t\t\tif (!nodes.has(def.fatherName)) {\n\t\t\t\tnodes.set(def.fatherName, {\n\t\t\t\t\tlabel: def.fatherName,\n\t\t\t\t\tclass: 'anothers male',\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// TODO: 所持馬扱いに書き換える\n\t\t\t}\n\t\t\tedges.push([{ v: def.fatherName, w: def.name }, { class: 'father' }]);\n\t\t}\n\t});\n\n\treturn { nodes: Array.from(nodes.entries()), edges };\n};\n\nexport const FamilyDiagram: React.FC = () => {\n\tconst d3Container = useRef<SVGSVGElement | null>(null);\n\n\tconst defs = useSelector((state: RootState) => state.horseDefs.list);\n\tconst data = useMemo(() => prepareGraph(defs), [defs]);\n\n\tuseEffect(() => {\n\t\tif (!d3Container.current) {\n\t\t\treturn;\n\t\t}\n\t\tconst svg = d3.select<SVGSVGElement, SVGSVGElement>(d3Container.current);\n\t\tsvg.selectAll('g').remove();\n\n\t\tif (data.nodes.length === 0 && data.edges.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst g = new dagreD3.graphlib.Graph()\n\t\t\t.setGraph({\n\t\t\t\trankdir: 'LR',\n\t\t\t})\n\t\t\t.setDefaultEdgeLabel(() => ({}));\n\n\t\t// Here we're setting nodeclass, which is used by our custom drawNodes function\n\t\t// below.\n\t\tdata.nodes.forEach((n) => {\n\t\t\tg.setNode(n[0], n[1]);\n\t\t});\n\n\t\tg.nodes().forEach(function (v) {\n\t\t\tconst node = g.node(v);\n\t\t\t// Round the corners of the nodes\n\t\t\tnode.rx = node.ry = 5;\n\t\t});\n\n\t\t// Set up edges, no special attributes.\n\t\tdata.edges.forEach((e) => {\n\t\t\tg.setEdge(e[0], e[1]);\n\t\t});\n\n\t\t// Create the renderer\n\t\tconst render = new dagreD3.render();\n\t\tconst svgGroup = svg.append('g');\n\n\t\t// Set up zoom support\n\t\tconst zoom = d3.zoom<SVGSVGElement, SVGSVGElement>().on('zoom', () => {\n\t\t\tsvgGroup.attr('transform', d3.event.transform);\n\t\t});\n\t\tsvg.call(zoom);\n\n\t\t// Run the renderer. This is what draws the final graph.\n\t\trender(d3.select('svg g'), (g as unknown) as graphlib.Graph);\n\n\t\t// Center the graph\n\t\tconst xCenterOffset =\n\t\t\t(Number(svg.attr('width')) - (g.graph().width || 0)) / 2;\n\t\tsvgGroup.attr(\n\t\t\t'transform',\n\t\t\t`translate(${Number.isNaN(xCenterOffset) ? 0 : xCenterOffset}, 20)`\n\t\t);\n\t\t// svg.attr(\"height\", (g.graph().height || 0) + 40);\n\t}, [d3Container, data]);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<svg\n\t\t\t\tclassName=\"d3-component mottv-derby-family\"\n\t\t\t\twidth=\"100%\"\n\t\t\t\theight=\"70vh\"\n\t\t\t\tref={d3Container}\n\t\t\t/>\n\t\t</React.Fragment>\n\t);\n};\n","import { Box, Paper, Typography } from '@material-ui/core';\nimport * as React from 'react';\nimport { FamilyDiagram } from './components/FamilyDiagram';\n\nexport const Family: React.FC = () => {\n\treturn (\n\t\t<Box>\n\t\t\t<Typography variant=\"h4\">系図</Typography>\n\t\t\t<Paper>\n\t\t\t\t<FamilyDiagram />\n\t\t\t</Paper>\n\t\t</Box>\n\t);\n};\n","import * as React from 'react';\n\nexport const Http404: React.FC = () => {\n\treturn <h2>404 NOT FOUND</h2>;\n};\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { HorseDef } from './horse';\n\nexport type HorseDefState = {\n\tlist: HorseDef[];\n};\n\nconst horseDefsSlice = createSlice({\n\tname: 'horseDefs',\n\tinitialState: { list: [] as HorseDef[] },\n\treducers: {\n\t\tinit: () => {},\n\t\tset: (draft, action: PayloadAction<HorseDefState>) => {\n\t\t\tdraft.list = action.payload.list;\n\t\t},\n\t},\n});\n\nexport const { actions, reducer } = horseDefsSlice;\nexport type HorseDefsAction = ReturnType<typeof actions[keyof typeof actions]>;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport type IndicatorState = {\n\tawaits: { [key: string]: number };\n};\n\nconst slice = createSlice({\n\tname: 'indicator',\n\tinitialState: { awaits: {} } as IndicatorState,\n\treducers: {\n\t\tset: (draft, action: PayloadAction<IndicatorState['awaits']>) => {\n\t\t\tdraft.awaits = action.payload;\n\t\t},\n\t\topen: (draft, { payload: key }: PayloadAction<string>) => {\n\t\t\tdraft.awaits = {\n\t\t\t\t...draft.awaits,\n\t\t\t\t[key]: 1 + (key in draft.awaits ? draft.awaits[key] : 0),\n\t\t\t};\n\t\t},\n\t\tclose: (draft, { payload: key }: PayloadAction<string>) => {\n\t\t\tif (!(key in draft.awaits)) {\n\t\t\t\tconsole.warn(`there isnt key [${key}] in `);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { [key]: target, ...rest } = draft.awaits;\n\t\t\tdraft.awaits = {\n\t\t\t\t...rest,\n\t\t\t\t...(target > 1 ? { [key]: target - 1 } : {}),\n\t\t\t};\n\t\t},\n\t},\n});\n\nexport const { actions, reducer } = slice;\nexport type IndicatorAction = ReturnType<typeof actions[keyof typeof actions]>;\n","import {\n\tOperatorFunction,\n\tObservableInput,\n\tObservedValueOf,\n\tof,\n\tdefer,\n\tconcat,\n} from 'rxjs';\nimport { mergeMap } from 'rxjs/operators';\nimport { Dispatch } from 'react';\nimport { Action, AnyAction } from 'redux';\nimport { indicatorActions, IndicatorAction } from '..';\n\nconst { open, close } = indicatorActions;\n// export const withIndicator = <T extends Action>(\n//   label: string\n// ): OperatorFunction<T, T | IndicatorAction> => (action$) =>\n//   action$.pipe(startWith(open(label)), endWith(close(label)));\nexport const withIndicator = <\n\tT extends Action,\n\tO extends ObservableInput<Action>\n>(\n\tlabel: string,\n\tinput: (action: T) => O\n): OperatorFunction<T, ObservedValueOf<O> | IndicatorAction> => (action$) =>\n\taction$.pipe(\n\t\tmergeMap((action) =>\n\t\t\tconcat(\n\t\t\t\tof(open(label)),\n\t\t\t\tdefer(() => input(action)),\n\t\t\t\tof(close(label))\n\t\t\t)\n\t\t)\n\t);\n//   action$.pipe(\n//     mergeMap((action) =>\n//       concat(\n//         of(open(label)),\n//         defer(() => input(action)),\n//         of(endWith(close(label)))\n//       )\n//     )\n//   );\n\nexport const withIndicatorSync = (dispatch: Dispatch<AnyAction>) => (\n\tlabel: string\n) => <R>(func: () => R) => {\n\ttry {\n\t\tdispatch(open(label));\n\t\treturn func();\n\t} finally {\n\t\tdispatch(close(label));\n\t}\n};\n\nexport const withIndicatorAsync = (dispatch: Dispatch<AnyAction>) => (\n\tlabel: string\n) => <R>(func: () => PromiseLike<R>) => {\n\treturn new Promise(() => {\n\t\tdispatch(open(label));\n\t})\n\t\t.then(func)\n\t\t.finally(() => {\n\t\t\tdispatch(close(label));\n\t\t});\n};\n","import { Backdrop, CircularProgress, makeStyles } from '@material-ui/core';\nimport React, { useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../../app/store';\n\nconst useStyles = makeStyles((theme) => ({\n\tbackdrop: {\n\t\tzIndex: theme.zIndex.drawer + 1,\n\t\tcolor: '#fff',\n\t},\n}));\n\nexport const Indicator: React.FC = () => {\n\tconst classes = useStyles();\n\tconst { awaits } = useSelector((state: RootState) => state.indicator);\n\n\tconst waiting = useMemo(() => Object.values(awaits).some((x) => x > 0), [\n\t\tawaits,\n\t]);\n\n\treturn (\n\t\t<Backdrop className={classes.backdrop} open={waiting}>\n\t\t\t<CircularProgress color=\"inherit\" />\n\t\t</Backdrop>\n\t);\n};\n","import { of } from 'rxjs';\nimport {\n\tgroupBy,\n\tmergeAll,\n\tmergeMap,\n\ttoArray,\n\treduce,\n\ttap,\n} from 'rxjs/operators';\n\nexport type Sex = 'male' | 'female' | 'unknown';\n\nexport type Line =\n\t| 'Uk' // 不明(指定なし)\n\t| 'Ec' // エクリプス系\n\t| 'Ph' // ファラリス系\n\t| 'Ns' // ナスルーラ系\n\t| 'Ro' // ロイヤルチャージャー系\n\t| 'Ne' // ニアークティック系\n\t| 'Na' // ネイティヴダンサー系\n\t| 'Fa' // フェアウェイ系\n\t| 'To' // トムフール系\n\t| 'Te' // テディ系\n\t| 'Sw' // スインフォード系\n\t| 'Ha' // ハンプトン系\n\t| 'Hi' // ヒムヤー系\n\t| 'St' // セントサイモン系\n\t| 'Ma' // マッチェム系\n\t| 'He'; // ヘロド系\n\nexport const lineMap: { [key in Line]: { label: string } } = {\n\tUk: { label: '不明(指定なし)' },\n\tEc: { label: 'エクリプス' },\n\tPh: { label: 'ファラリス' },\n\tNs: { label: 'ナスルーラ' },\n\tRo: { label: 'ロイヤルチャージャー' },\n\tNe: { label: 'ニアークティック' },\n\tNa: { label: 'ネイティヴダンサー' },\n\tFa: { label: 'フェアウェイ' },\n\tTo: { label: 'トムフール' },\n\tTe: { label: 'テディ' },\n\tSw: { label: 'スインフォード' },\n\tHa: { label: 'ハンプトン' },\n\tHi: { label: 'ヒムヤー' },\n\tSt: { label: 'セントサイモン' },\n\tMa: { label: 'マッチェム' },\n\tHe: { label: 'ヘロド' },\n};\n\nexport type HorseDef = {\n\t/** 名称: ID代わり */\n\tname: string;\n\t/** 父親名 */\n\tfatherName?: string;\n\t/** 母親名 */\n\tmotherName?: string;\n\t/** 性別 */\n\tsex: Sex;\n\t/** 系統 */\n\tline: Line;\n\t/** 種牡馬/繁殖牝馬一覧に載っているか */\n\tlisted: boolean;\n\t/** 所有馬 */\n\towned: boolean;\n\t/** 表示すべきか */\n\tshow: boolean;\n\t/** メモ */\n\tmemo: string[];\n};\n\ntype AnscestorHorse = {\n\tname?: string;\n\tfather?: AnscestorHorse;\n\tmother?: AnscestorHorse;\n\tline?: Line;\n};\ninterface ListedAnscestor extends AnscestorHorse {\n\tname: Exclude<AnscestorHorse['name'], undefined>;\n\tfather: Exclude<AnscestorHorse['father'], undefined>;\n\tmother: Exclude<AnscestorHorse['mother'], undefined>;\n}\n\n/**\n * 種牡馬・繁殖牝馬リストを競走馬一覧にflattenして返す\n * @param def\n * @param param1\n */\nconst flatten = (\n\tdef: AnscestorHorse,\n\t{ sex, listed, childName }: { sex: Sex; listed?: boolean; childName: string }\n): HorseDef[] => {\n\tconst name =\n\t\tdef.name ??\n\t\t`${childName}${sex === 'female' ? '母' : sex === 'male' ? '父' : '親'}`;\n\tconst show = def.name !== void 0;\n\n\tconst fathers = def.father\n\t\t? flatten(def.father, { sex: 'male', childName: name })\n\t\t: [];\n\tconst mothers = def.mother\n\t\t? flatten(def.mother, { sex: 'female', childName: name })\n\t\t: [];\n\tconst line = def.line ?? fathers?.[0]?.line ?? 'Uk';\n\n\tconst target: HorseDef = {\n\t\tname,\n\t\tline,\n\t\tlisted: !!listed,\n\t\towned: false,\n\t\tshow,\n\t\tfatherName: fathers?.[0]?.name,\n\t\tmotherName: mothers?.[0]?.name,\n\t\tmemo: [],\n\t\tsex,\n\t};\n\n\treturn [target, fathers, mothers].flat();\n};\n\nconst fetchOwned =\n\t// 所有馬\n\t(): Promise<HorseDef[]> =>\n\t\tfetch(`${process.env.PUBLIC_URL}/assets/horse-defs.json`)\n\t\t\t.then((res) => res.json())\n\t\t\t.then((data: (HorseDef & { removed?: boolean })[]) =>\n\t\t\t\tdata\n\t\t\t\t\t.filter((def) => !def.removed)\n\t\t\t\t\t.map((def) => ({\n\t\t\t\t\t\t...def,\n\t\t\t\t\t\tlisted: !!def.listed,\n\t\t\t\t\t\towned: true,\n\t\t\t\t\t\tshow: true,\n\t\t\t\t\t\tmemo: def.memo ?? [],\n\t\t\t\t\t}))\n\t\t\t);\n\n/**\n * 繁殖牝馬リスト\n */\nconst fetchBroodmare = (): Promise<HorseDef[]> =>\n\tfetch(`${process.env.PUBLIC_URL}/assets/broodmares.json`)\n\t\t.then((res) => res.json())\n\t\t.then((data: ListedAnscestor[]) =>\n\t\t\tdata\n\t\t\t\t.map((def) =>\n\t\t\t\t\tflatten(def, { sex: 'female', listed: true, childName: 'N/A' })\n\t\t\t\t)\n\t\t\t\t.flat()\n\t\t);\n\n/**\n * 種牡馬リスト\n */\nconst fetchStallion = (): Promise<HorseDef[]> =>\n\tfetch(`${process.env.PUBLIC_URL}/assets/stallions.json`)\n\t\t.then((res) => res.json())\n\t\t.then((data: ListedAnscestor[]) =>\n\t\t\tdata\n\t\t\t\t.map((def) =>\n\t\t\t\t\tflatten(def, { sex: 'male', listed: true, childName: 'N/A' })\n\t\t\t\t)\n\t\t\t\t.flat()\n\t\t);\n\n/**\n * 競走馬の定義を取得してマージする\n */\nexport const fetchHorseDefs = (): Promise<HorseDef[]> =>\n\tof(fetchOwned, fetchStallion, fetchBroodmare)\n\t\t.pipe(\n\t\t\tmergeMap((func) => func()),\n\t\t\tmergeAll(),\n\t\t\tgroupBy((def) => def.name),\n\t\t\tmergeMap((group) =>\n\t\t\t\tgroup.pipe(\n\t\t\t\t\treduce((lhs, rhs) => ({\n\t\t\t\t\t\tname: lhs.name ?? rhs.name,\n\t\t\t\t\t\tsex: lhs.sex ?? rhs.sex,\n\t\t\t\t\t\tlisted: lhs.listed || rhs.listed,\n\t\t\t\t\t\tshow: lhs.show || rhs.show,\n\t\t\t\t\t\towned: lhs.owned || rhs.owned,\n\t\t\t\t\t\tline: lhs.line === 'Uk' ? rhs.line : lhs.line,\n\t\t\t\t\t\tmemo: [...lhs.memo, ...rhs.memo],\n\t\t\t\t\t\tfatherName: lhs.fatherName ?? rhs.fatherName,\n\t\t\t\t\t\tmotherName: lhs.motherName ?? rhs.motherName,\n\t\t\t\t\t}))\n\t\t\t\t)\n\t\t\t),\n\t\t\ttoArray(),\n\t\t\ttap((defs) => {\n\t\t\t\tconst m = new Map<string, HorseDef>(defs.map((def) => [def.name, def]));\n\n\t\t\t\t/** lineがUnknownのものを父親の情報から保完する */\n\t\t\t\tconst complementLine = (def: HorseDef) => {\n\t\t\t\t\t// 対応不要\n\t\t\t\t\tif (def.line && def.line !== 'Uk') {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// 父親が後ろにいるかも知れないので先に再帰しておく\n\t\t\t\t\tif (def.fatherName) {\n\t\t\t\t\t\tconst father = m.get(def.fatherName);\n\t\t\t\t\t\tif (father) {\n\t\t\t\t\t\t\tcomplementLine(father);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`${def.fatherName}: father of ${def.name} doesnt exist in list`,\n\t\t\t\t\t\t\t\tdef,\n\t\t\t\t\t\t\t\tm\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// それでも未確定ならUkに設定\n\t\t\t\t\tdef.line = m.get(def.fatherName || '')?.line ?? 'Uk';\n\n\t\t\t\t\tif (def.line === 'Uk') {\n\t\t\t\t\t\tconsole.warn(`couldnt determine line of ${def.name}`);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tdefs.forEach(complementLine);\n\t\t\t})\n\t\t)\n\t\t.toPromise();\n","import { Epic, combineEpics } from 'redux-observable';\n\nimport { horseDefsActions, HorseDefsAction } from '..';\nimport { withIndicator, IndicatorAction } from '../../indicator';\nimport { fetchHorseDefs } from './horse';\n\nexport const fetchDefsEpic: Epic<\n\tHorseDefsAction | IndicatorAction,\n\tHorseDefsAction | IndicatorAction\n> = (action$) =>\n\taction$\n\t\t.ofType(horseDefsActions.init.type)\n\t\t.pipe(\n\t\t\twithIndicator('horse-defs/fetch', async () =>\n\t\t\t\thorseDefsActions.set({ list: await fetchHorseDefs() })\n\t\t\t)\n\t\t);\n\nexport const epic = combineEpics(fetchDefsEpic);\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport type PedigreeState = {\n\tdisplays: string[];\n};\n\nconst slice = createSlice({\n\tname: 'pedigree',\n\tinitialState: { displays: [] } as PedigreeState,\n\treducers: {\n\t\tset: (draft, action: PayloadAction<PedigreeState['displays']>) => {\n\t\t\tdraft.displays = action.payload;\n\t\t},\n\t\tpush: (draft, { payload: key }: PayloadAction<string>) => {\n\t\t\tdraft.displays.push(key);\n\t\t},\n\t\tpop: (draft, _: PayloadAction<void>) => {\n\t\t\tif (draft.displays.length <= 0) {\n\t\t\t\tconsole.warn(`pedigree list is empty`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdraft.displays.pop();\n\t\t},\n\t\tclear: (draft, _: PayloadAction<void>) => {\n\t\t\tdraft.displays = [];\n\t\t},\n\t},\n});\n\nexport const { actions, reducer } = slice;\nexport type PedigreeAction = ReturnType<typeof actions[keyof typeof actions]>;\n","import { makeStyles, createStyles, Theme, Typography } from '@material-ui/core';\nimport {\n\tTableContainer,\n\tTable,\n\tTableBody,\n\tTableRow,\n\tTableCell,\n\tPaper,\n} from '@material-ui/core';\nimport * as React from 'react';\nimport { useMemo } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { RootState } from '../../../app/store';\n\nimport { HorseDef } from '../../horse-defs';\nimport { Line, lineMap } from '../../horse-defs';\n\nexport interface PedigreeTableProps {\n\tdef: HorseDef;\n}\n\ntype PedigreeNode = {\n\tname: string;\n\tgeneration: number;\n\tshow: boolean;\n\tline: Line;\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\ttable: {\n\t\t\t'& .cell': {\n\t\t\t\tbackgroundColor: 'gray',\n\t\t\t\t'&.empty': {\n\t\t\t\t\tbackgroundColor: 'lightgray',\n\t\t\t\t},\n\t\t\t\t'&.Ec': {\n\t\t\t\t\tbackgroundColor: '#ffffff',\n\t\t\t\t},\n\t\t\t\t'&.Ph': {\n\t\t\t\t\tbackgroundColor: '#cfe8ff',\n\t\t\t\t},\n\t\t\t\t'&.Ns': {\n\t\t\t\t\tbackgroundColor: '#00bb00',\n\t\t\t\t},\n\t\t\t\t'&.Ro': {\n\t\t\t\t\tbackgroundColor: '#ffb4c8',\n\t\t\t\t},\n\t\t\t\t'&.Ne': {\n\t\t\t\t\tbackgroundColor: '#fdf488',\n\t\t\t\t},\n\t\t\t\t'&.Na': {\n\t\t\t\t\tbackgroundColor: '#52d8fd',\n\t\t\t\t},\n\t\t\t\t'&.Fa': {\n\t\t\t\t\tbackgroundColor: '#ffc943',\n\t\t\t\t},\n\t\t\t\t'&.To': {\n\t\t\t\t\tbackgroundColor: '#ff9d4b',\n\t\t\t\t},\n\t\t\t\t'&.Te': {\n\t\t\t\t\tcolor: theme.palette.primary.contrastText,\n\t\t\t\t\tbackgroundColor: '#9e57ff',\n\t\t\t\t},\n\t\t\t\t'&.Sw': {\n\t\t\t\t\tbackgroundColor: '#ffe0e1',\n\t\t\t\t},\n\t\t\t\t'&.Ha': {\n\t\t\t\t\tbackgroundColor: '#90ee71',\n\t\t\t\t},\n\t\t\t\t'&.Hi': {\n\t\t\t\t\tcolor: theme.palette.primary.contrastText,\n\t\t\t\t\tbackgroundColor: '#2c6aff',\n\t\t\t\t},\n\t\t\t\t'&.St': {\n\t\t\t\t\tbackgroundColor: '#9e93ff',\n\t\t\t\t},\n\t\t\t\t'&.Ma': {\n\t\t\t\t\tbackgroundColor: '#c5b2fe',\n\t\t\t\t},\n\t\t\t\t'&.He': {\n\t\t\t\t\tbackgroundColor: '#b9f8ff',\n\t\t\t\t},\n\t\t\t\t'&.mother': {\n\t\t\t\t\tcolor: theme.palette.primary.contrastText,\n\t\t\t\t\tbackgroundColor: '#dd7165',\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t})\n);\n\n/** 対象世代の限界点 */\nconst limit = 5;\nconst construct = (map: Map<string, HorseDef>) => (\n\tdef: HorseDef\n): PedigreeNode[][] => {\n\tconst table = new Array<PedigreeNode[]>();\n\n\tfor (let row = 0; row < 2 ** (limit - 1); ++row) {\n\t\tconst cols = new Array<PedigreeNode>();\n\t\tfor (let col = 0; col < limit; ++col) {\n\t\t\tcols.push({ name: 'empty', generation: col, show: false, line: 'Uk' });\n\t\t}\n\t\ttable.push(cols);\n\t}\n\n\tconst mapPedigree = (row: number, col: number, def: HorseDef) => {\n\t\ttable[row][col] = {\n\t\t\tname: def.name,\n\t\t\tgeneration: col,\n\t\t\tshow: !!def.show,\n\t\t\tline: def.line,\n\t\t};\n\n\t\tif (col + 1 < limit) {\n\t\t\tif (def.fatherName) {\n\t\t\t\tconst father = map.get(def.fatherName);\n\t\t\t\tif (father) {\n\t\t\t\t\tmapPedigree(row, col + 1, father);\n\t\t\t\t} else {\n\t\t\t\t\tmapPedigree(row, col + 1, {\n\t\t\t\t\t\tname: def.fatherName,\n\t\t\t\t\t\tsex: 'male',\n\t\t\t\t\t\tline: 'Uk',\n\t\t\t\t\t\tlisted: false,\n\t\t\t\t\t\tshow: true,\n\t\t\t\t\t\towned: false,\n\t\t\t\t\t\tmemo: ['未定義'],\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (def.motherName) {\n\t\t\t\tconst mother = map.get(def.motherName);\n\t\t\t\tif (mother) {\n\t\t\t\t\tmapPedigree(row + 2 ** (limit - col - 2), col + 1, mother);\n\t\t\t\t} else {\n\t\t\t\t\tmapPedigree(row + 2 ** (limit - col - 2), col + 1, {\n\t\t\t\t\t\tname: def.motherName,\n\t\t\t\t\t\tsex: 'female',\n\t\t\t\t\t\tline: 'Uk',\n\t\t\t\t\t\tlisted: false,\n\t\t\t\t\t\tshow: true,\n\t\t\t\t\t\towned: false,\n\t\t\t\t\t\tmemo: ['未定義'],\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tmapPedigree(0, 0, def);\n\treturn table;\n};\n\nconst renderCell = (\n\trow: number,\n\tcol: number,\n\tcell: PedigreeNode\n): JSX.Element => {\n\tconst threshold = 2 ** (limit - col - 2);\n\tconst className = [\n\t\t'cell',\n\t\t!cell.show ? 'empty' : cell.line,\n\t\tcol === 0 && row === 2 ** (limit - 2) ? ['mother'] : [],\n\t]\n\t\t.flatMap((x) => x)\n\t\t.join(' ');\n\treturn (\n\t\t<React.Fragment key={`col-${col}`}>\n\t\t\t{row % threshold === 0 ? (\n\t\t\t\t<TableCell rowSpan={threshold} className={className}>\n\t\t\t\t\t{cell.show ? (\n\t\t\t\t\t\t<Typography variant=\"body2\">{cell.name}</Typography>\n\t\t\t\t\t) : null}\n\t\t\t\t</TableCell>\n\t\t\t) : null}\n\t\t</React.Fragment>\n\t);\n};\n\nconst renderLine = (line: Line): JSX.Element => {\n\treturn line !== 'Uk' ? (\n\t\t<TableCell\n\t\t\tkey={`col-line`}\n\t\t\tclassName={['cell', line].join(' ')}\n\t\t\trowSpan={2}\n\t\t>\n\t\t\t<Typography variant=\"body2\">{lineMap[line].label}系</Typography>\n\t\t</TableCell>\n\t) : (\n\t\t<TableCell\n\t\t\tkey={`col-line`}\n\t\t\tclassName={['cell', 'empty'].join(' ')}\n\t\t\trowSpan={2}\n\t\t/>\n\t);\n};\n\nconst render = (data: PedigreeNode[][]): JSX.Element => {\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{data.map((cols, row) => (\n\t\t\t\t<TableRow key={`row-${row}`}>\n\t\t\t\t\t{cols\n\t\t\t\t\t\t.filter((_, ix) => ix > 0)\n\t\t\t\t\t\t.map((cell, col) => renderCell(row, col, cell))}\n\t\t\t\t\t{row % 2 === 0 ? renderLine(cols[cols.length - 1].line) : null}\n\t\t\t\t</TableRow>\n\t\t\t))}\n\t\t</React.Fragment>\n\t);\n};\n\nexport const PedigreeTable: React.FC<PedigreeTableProps> = ({ def }) => {\n\tconst classes = useStyles();\n\tconst defs = useSelector((state: RootState) => state.horseDefs.list);\n\tconst map = useMemo(\n\t\t() =>\n\t\t\tdefs.reduce(\n\t\t\t\t(map, def) => map.set(def.name, def),\n\t\t\t\tnew Map<string, typeof defs[number]>()\n\t\t\t),\n\t\t[defs]\n\t);\n\n\tconst array = construct(map)(def);\n\n\treturn (\n\t\t<TableContainer component={Paper}>\n\t\t\t<Table className={classes.table} size=\"small\">\n\t\t\t\t<TableBody>{render(array)}</TableBody>\n\t\t\t</Table>\n\t\t</TableContainer>\n\t);\n};\n","import * as React from 'react';\nimport { useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Dialog, DialogTitle, Typography } from '@material-ui/core';\n\nimport { RootState } from '../../../app/store';\n\nimport { pedigreeActions } from '..';\nimport { PedigreeTable } from './PedigreeTable';\nimport { lineMap } from '../../horse-defs';\n\nexport const PedigreeDialog: React.FC = () => {\n\tconst dispatch = useDispatch();\n\tconst { displays } = useSelector((state: RootState) => state.pedigree);\n\tconst open = useMemo(() => displays.length > 0, [displays]);\n\tconst defs = useSelector((state: RootState) => state.horseDefs.list);\n\tconst def = useMemo(\n\t\t() =>\n\t\t\tdisplays.length > 0\n\t\t\t\t? defs.find((def) => def.name === displays[displays.length - 1])\n\t\t\t\t: void 0,\n\t\t[defs, displays]\n\t);\n\n\tconst handleClose = useMemo(\n\t\t() => () => {\n\t\t\tdispatch(pedigreeActions.clear());\n\t\t},\n\t\t[dispatch]\n\t);\n\n\treturn def ? (\n\t\t<Dialog open={open} onClose={handleClose}>\n\t\t\t<DialogTitle>\n\t\t\t\t<Typography variant=\"h5\">血統表: {def.name}</Typography>\n\t\t\t\t{def.line !== 'Uk' ? (\n\t\t\t\t\t<Typography variant=\"h6\" style={{ paddingLeft: '1em' }}>\n\t\t\t\t\t\t大系統: {lineMap[def.line].label}系\n\t\t\t\t\t</Typography>\n\t\t\t\t) : null}\n\t\t\t</DialogTitle>\n\t\t\t<PedigreeTable def={def} />\n\t\t</Dialog>\n\t) : null;\n};\n","import { makeStyles, createStyles, Theme, IconButton } from '@material-ui/core';\nimport { TreeItem, TreeView } from '@material-ui/lab';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faMars, faQuestion, faVenus } from '@fortawesome/free-solid-svg-icons';\nimport * as React from 'react';\nimport { useEffect, useMemo, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RootState } from '../../../app/store';\nimport { HorseDef } from '../../horse-defs';\nimport { withIndicatorSync } from '../../indicator';\nimport { pedigreeActions } from '../../pedigree';\n\ntype Datum = {\n\tid: string;\n\tlabel: JSX.Element;\n\tclassName?: string;\n\tchildren: Datum[];\n\tfatherName?: string;\n\tmotherName?: string;\n\towned: boolean;\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n\tcreateStyles({\n\t\troot: {\n\t\t\t'& .name': {\n\t\t\t\tmarginLeft: theme.spacing(0.5),\n\t\t\t},\n\t\t\t'& .father': {\n\t\t\t\tmarginLeft: theme.spacing(1),\n\t\t\t},\n\t\t\t'& .male': {\n\t\t\t\tcolor: '#2196f3',\n\t\t\t},\n\t\t\t'& .female': {\n\t\t\t\tcolor: '#f44336',\n\t\t\t},\n\t\t\t'& .unknown': {\n\t\t\t\tcolor: '#888888',\n\t\t\t},\n\t\t},\n\t})\n);\n\nconst InformationIcon: React.FC<{ name: string }> = ({ name }) => {\n\tconst dispatch = useDispatch();\n\tconst handleClick = useMemo(\n\t\t() => () => {\n\t\t\tdispatch(pedigreeActions.push(name));\n\t\t},\n\t\t[dispatch, name]\n\t);\n\n\treturn (\n\t\t<IconButton aria-label=\"horse info\" size=\"small\" onClick={handleClick}>\n\t\t\t<InfoOutlinedIcon fontSize=\"inherit\" />\n\t\t</IconButton>\n\t);\n};\n\nconst setNodeProperty = (node: Datum, def: HorseDef) => {\n\tnode.owned = node.owned || def.owned;\n\tnode.className = [def.sex].join(' ');\n\tnode.label = (\n\t\t<React.Fragment>\n\t\t\t{(() => {\n\t\t\t\tswitch (def.sex) {\n\t\t\t\t\tcase 'male':\n\t\t\t\t\t\treturn <FontAwesomeIcon icon={faMars} />;\n\t\t\t\t\tcase 'female':\n\t\t\t\t\t\treturn <FontAwesomeIcon icon={faVenus} />;\n\t\t\t\t\tcase 'unknown':\n\t\t\t\t\t\treturn <FontAwesomeIcon icon={faQuestion} />;\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\tconst __exhaust: never = def.sex; // eslint-disable-line @typescript-eslint/no-unused-vars\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})()}\n\t\t\t<span className=\"name\">\n\t\t\t\t{def.name}\n\t\t\t\t<InformationIcon name={def.name} />\n\t\t\t</span>\n\t\t\t{def.fatherName ? (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t(\n\t\t\t\t\t<span className=\"father male\">\n\t\t\t\t\t\t{def.fatherName}\n\t\t\t\t\t\t<InformationIcon name={def.fatherName} />\n\t\t\t\t\t</span>\n\t\t\t\t\t)\n\t\t\t\t</React.Fragment>\n\t\t\t) : null}\n\t\t</React.Fragment>\n\t);\n\tnode.fatherName = def.fatherName ?? node.fatherName;\n\tnode.motherName = def.motherName ?? node.fatherName;\n};\n\nconst construct = (defs: HorseDef[]): { nodes: Datum[]; ids: string[] } => {\n\tconst map = new Map<string, Datum>();\n\n\tconst fetchOrCreateNode = (id: string) =>\n\t\tmap.get(id) ??\n\t\t(() => {\n\t\t\t// 新規\n\t\t\tconst created: Datum = {\n\t\t\t\tid,\n\t\t\t\tlabel: <React.Fragment />,\n\t\t\t\tchildren: [],\n\t\t\t\towned: false,\n\t\t\t};\n\t\t\tmap.set(id, created);\n\t\t\treturn created;\n\t\t})();\n\n\tconst append = (def: HorseDef) => {\n\t\tconst node = fetchOrCreateNode(def.name);\n\n\t\tsetNodeProperty(node, def);\n\n\t\tif (def.motherName) {\n\t\t\tconst mother = fetchOrCreateNode(def.motherName);\n\t\t\tmother.children.push(node);\n\t\t}\n\t};\n\n\tdefs.forEach(append);\n\treturn {\n\t\tnodes: Array.from(map.values()).filter(\n\t\t\t(value) =>\n\t\t\t\t// 所有場であることは絶対条件\n\t\t\t\tvalue.owned &&\n\t\t\t\t// 母の名前がわからないか\n\t\t\t\t(!value.motherName ||\n\t\t\t\t\t// 母が登録されていないか\n\t\t\t\t\t!map.has(value.motherName) ||\n\t\t\t\t\t// 母はいるけど所有場でないか\n\t\t\t\t\t(map.has(value.motherName) && !map.get(value.motherName)?.owned))\n\t\t),\n\t\tids: Array.from(map.keys()),\n\t};\n};\n\nconst renderTree = (toggleExpand: (node: Datum) => React.MouseEventHandler) =>\n\tfunction MareLineTreeNode(node: Datum) {\n\t\treturn (\n\t\t\t<TreeItem\n\t\t\t\tclassName={node.className}\n\t\t\t\tkey={node.id}\n\t\t\t\tnodeId={node.id}\n\t\t\t\tlabel={node.label}\n\t\t\t\tonIconClick={toggleExpand(node)}\n\t\t\t>\n\t\t\t\t{node.children.map(renderTree(toggleExpand))}\n\t\t\t</TreeItem>\n\t\t);\n\t};\n\nexport const MareLineTree: React.FC = function MareLineTree() {\n\tconst classes = useStyles();\n\tconst dispatch = useDispatch();\n\tconst [expanded, setExpanded] = useState<string[]>([]);\n\n\tconst defs = useSelector((state: RootState) => state.horseDefs.list);\n\tconst { nodes, ids } = useMemo(() => {\n\t\tif (defs.length > 0) {\n\t\t\treturn withIndicatorSync(dispatch)('mare-line/init')(() =>\n\t\t\t\tconstruct(defs)\n\t\t\t);\n\t\t} else {\n\t\t\treturn { nodes: [], ids: [] };\n\t\t}\n\t}, [dispatch, defs]);\n\n\tuseEffect(() => {\n\t\tsetExpanded(ids);\n\t}, [setExpanded, ids]);\n\n\tconst toggleExpand = useMemo<(node: Datum) => React.MouseEventHandler>(\n\t\t() => (node) => (_event) => {\n\t\t\tsetExpanded(\n\t\t\t\texpanded.includes(node.id)\n\t\t\t\t\t? expanded.filter((id) => id !== node.id)\n\t\t\t\t\t: [...expanded, node.id]\n\t\t\t);\n\t\t},\n\t\t[expanded, setExpanded]\n\t);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<TreeView\n\t\t\t\tclassName={classes.root}\n\t\t\t\texpanded={expanded}\n\t\t\t\tdefaultCollapseIcon={<ExpandMoreIcon />}\n\t\t\t\tdefaultExpandIcon={<ChevronRightIcon />}\n\t\t\t\tdefaultEndIcon={<RemoveIcon />}\n\t\t\t>\n\t\t\t\t{nodes.map(renderTree(toggleExpand))}\n\t\t\t</TreeView>\n\t\t</React.Fragment>\n\t);\n};\n","import * as React from 'react';\nimport { createStyles, Paper, Typography, makeStyles } from '@material-ui/core';\n\nimport { MareLineTree } from './MareLineTree';\n\nconst useStyles = makeStyles((theme) =>\n\tcreateStyles({\n\t\tpaper: {\n\t\t\tpadding: theme.spacing(2),\n\t\t},\n\t})\n);\n\nexport const MareLine: React.FC = () => {\n\tconst classes = useStyles();\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Typography variant=\"h4\">牝系図</Typography>\n\t\t\t<Paper className={classes.paper}>\n\t\t\t\t<MareLineTree />\n\t\t\t</Paper>\n\t\t</React.Fragment>\n\t);\n};\n","import { Paper, createStyles, makeStyles } from '@material-ui/core';\n\nimport * as React from 'react';\nimport { useEffect } from 'react';\nimport Markdown from 'react-markdown';\nimport { useDispatch } from 'react-redux';\n\nimport 'github-markdown-css';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../../app/store';\nimport { changeLogActions } from '..';\n\nconst useStyles = makeStyles((theme) =>\n\tcreateStyles({\n\t\tpaper: {\n\t\t\tpadding: theme.spacing(1),\n\t\t},\n\t})\n);\n\nexport const ChangeLog: React.FC = () => {\n\tconst classes = useStyles();\n\tconst dispatch = useDispatch();\n\n\tconst { article } = useSelector((state: RootState) => state.changeLog);\n\tuseEffect(() => {\n\t\tdispatch(changeLogActions.init());\n\t}, [dispatch]);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Paper className={classes.paper}>\n\t\t\t\t{article !== '' ? (\n\t\t\t\t\t<Markdown source={article} className=\"markdown-body\" />\n\t\t\t\t) : null}\n\t\t\t</Paper>\n\t\t</React.Fragment>\n\t);\n};\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport type ChangeLogState = {\n\tarticle: string;\n};\n\nconst slice = createSlice({\n\tname: 'change-log',\n\tinitialState: { article: '' } as ChangeLogState,\n\treducers: {\n\t\tinit: () => {},\n\t\tset: (draft, action: PayloadAction<ChangeLogState['article']>) => {\n\t\t\tdraft.article = action.payload;\n\t\t},\n\t},\n});\n\nexport const { actions, reducer } = slice;\nexport type ChangeLogAction = ReturnType<typeof actions[keyof typeof actions]>;\n","import { Epic, combineEpics } from 'redux-observable';\n\nimport { changeLogActions, ChangeLogAction } from '..';\nimport { withIndicator, IndicatorAction } from '../../indicator';\nimport { fetchChangeLogs } from './logic';\n\nexport const fetchDefsEpic: Epic<\n\tChangeLogAction | IndicatorAction,\n\tChangeLogAction | IndicatorAction\n> = (action$) =>\n\taction$\n\t\t.ofType(changeLogActions.init.type)\n\t\t.pipe(\n\t\t\twithIndicator('change-logs/fetch', async () =>\n\t\t\t\tchangeLogActions.set(await fetchChangeLogs())\n\t\t\t)\n\t\t);\n\nexport const epic = combineEpics(fetchDefsEpic);\n","export const fetchChangeLogs = () =>\n\tfetch(`${process.env.PUBLIC_URL}/assets/change-log.md`).then((res) =>\n\t\tres.text()\n\t);\n","import React, { useEffect, useMemo, useState } from 'react';\nimport { Redirect, Route, Switch } from 'react-router';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Family } from './features/family/Family';\nimport { Http404 } from './features/errors/404';\nimport {\n\tAppBar,\n\tBox,\n\tDrawer,\n\tIconButton,\n\tLink as Anchor,\n\tList,\n\tListItem,\n\tListItemIcon,\n\tListItemText,\n\tToolbar,\n\tTypography,\n\tuseTheme,\n} from '@material-ui/core';\nimport { Link } from 'react-router-dom';\nimport {\n\tList as ListIcon,\n\tMenuOutlined,\n\tTimeline as TimelineIcon,\n\tChangeHistory as ChangeHistoryIcon,\n} from '@material-ui/icons';\nimport { useDispatch } from 'react-redux';\nimport { horseDefsActions } from './features/horse-defs';\nimport { MareLine } from './features/mare-line';\nimport { Indicator } from './features/indicator';\nimport { PedigreeDialog } from './features/pedigree';\nimport { ChangeLog } from './features/changelog';\n\nimport './App.css';\n\ntype MenuItemDef = {\n\ticon: JSX.Element;\n\tlabel: string;\n\tpath: string;\n\tpage: JSX.Element;\n};\n\nconst renderListItem = (def: MenuItemDef) => {\n\treturn (\n\t\t<ListItem key={def.path} button={true} component={Link} to={def.path}>\n\t\t\t<ListItemIcon>{def.icon}</ListItemIcon>\n\t\t\t<ListItemText primary={def.label} />\n\t\t</ListItem>\n\t);\n};\n\nconst defs: MenuItemDef[] = [\n\t{\n\t\ticon: <ListIcon />,\n\t\tlabel: '牝系図',\n\t\tpath: '/mare-line',\n\t\tpage: <MareLine />,\n\t},\n\t{\n\t\ticon: <TimelineIcon />,\n\t\tlabel: '家系図(旧)',\n\t\tpath: '/family',\n\t\tpage: <Family />,\n\t},\n\t{\n\t\ticon: <ChangeHistoryIcon />,\n\t\tlabel: '更新履歴',\n\t\tpath: '/change-log',\n\t\tpage: <ChangeLog />,\n\t},\n];\n\nconst MenuList: React.FC<{\n\ttoggleMenu: () => void;\n}> = ({ toggleMenu }) => {\n\treturn (\n\t\t<List onClick={toggleMenu} onKeyDown={toggleMenu}>\n\t\t\t{defs.map(renderListItem)}\n\t\t</List>\n\t);\n};\n\nconst Header: React.FC = () => {\n\tconst [menuOpen, setMenuOpen] = useState<boolean>(false);\n\n\tconst toggleMenu = useMemo(\n\t\t() => () => {\n\t\t\tsetMenuOpen(!menuOpen);\n\t\t},\n\t\t[menuOpen, setMenuOpen]\n\t);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<AppBar position=\"static\">\n\t\t\t\t<Toolbar>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tedge=\"start\"\n\t\t\t\t\t\tcolor=\"inherit\"\n\t\t\t\t\t\taria-label=\"menu\"\n\t\t\t\t\t\tonClick={toggleMenu}\n\t\t\t\t\t>\n\t\t\t\t\t\t<MenuOutlined />\n\t\t\t\t\t</IconButton>\n\t\t\t\t\t<Typography variant=\"h6\">MOTTV Derby</Typography>\n\t\t\t\t\t{/* <Button color=\"inherit\">Login</Button> */}\n\t\t\t\t</Toolbar>\n\t\t\t</AppBar>\n\t\t\t<Drawer open={menuOpen} onClose={toggleMenu}>\n\t\t\t\t<MenuList toggleMenu={toggleMenu} />\n\t\t\t</Drawer>\n\t\t</React.Fragment>\n\t);\n};\n\nconst Footer: React.FC = () => {\n\tconst theme = useTheme();\n\treturn (\n\t\t<Box display=\"flex\" justifyContent=\"flex-end\" margin={theme.spacing(0.2)}>\n\t\t\t<Anchor href=\"https://www.youtube.com/user/MOTTYGAMES/\" target=\"__blank\">\n\t\t\t\tMOTTV\n\t\t\t</Anchor>\n\t\t</Box>\n\t);\n};\n\nexport const App: React.FC = () => {\n\tconst theme = useTheme();\n\tconst dispatch = useDispatch();\n\n\tuseEffect(() => {\n\t\tdispatch(horseDefsActions.init());\n\t}, [dispatch]);\n\n\treturn (\n\t\t<BrowserRouter basename={process.env.PUBLIC_URL}>\n\t\t\t<React.Fragment>\n\t\t\t\t<Header />\n\t\t\t\t<Box margin={theme.spacing(0.5)}>\n\t\t\t\t\t<Switch>\n\t\t\t\t\t\t{defs.map(({ path, page }) => (\n\t\t\t\t\t\t\t<Route key={path} path={path}>\n\t\t\t\t\t\t\t\t{page}\n\t\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t<Route exact path=\"/\">\n\t\t\t\t\t\t\t<Redirect to=\"/mare-line\" />\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t\t<Route>\n\t\t\t\t\t\t\t<Http404 />\n\t\t\t\t\t\t</Route>\n\t\t\t\t\t</Switch>\n\t\t\t\t</Box>\n\t\t\t\t<Footer />\n\t\t\t\t<PedigreeDialog />\n\t\t\t\t<Indicator />\n\t\t\t</React.Fragment>\n\t\t</BrowserRouter>\n\t);\n};\n","import { configureStore } from '@reduxjs/toolkit';\nimport { Action } from 'redux';\nimport { combineEpics, createEpicMiddleware } from 'redux-observable';\n\nimport { horseDefsReducer, horseDefsEpic } from '../features/horse-defs';\nimport { indicatorReducer } from '../features/indicator';\nimport { pedigreeReducer } from '../features/pedigree';\nimport { changeLogReducer, changeLogEpic } from '../features/changelog';\n\nconst dependencies = {};\nconst epicMiddleware = createEpicMiddleware<\n\tAction,\n\tAction,\n\tvoid,\n\ttypeof dependencies\n>({\n\tdependencies,\n});\n\nexport const store = configureStore({\n\treducer: {\n\t\thorseDefs: horseDefsReducer,\n\t\tindicator: indicatorReducer,\n\t\tpedigree: pedigreeReducer,\n\t\tchangeLog: changeLogReducer,\n\t},\n\tmiddleware: (getDefaultMiddleware) =>\n\t\tgetDefaultMiddleware({\n\t\t\tthunk: false,\n\t\t}).concat([epicMiddleware]),\n});\n\nepicMiddleware.run(combineEpics(horseDefsEpic, changeLogEpic));\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type Dependencies = typeof dependencies;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === '[::1]' ||\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\n\t\twindow.location.hostname.match(\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n\t\t)\n);\n\ntype Config = {\n\tonSuccess?: (registration: ServiceWorkerRegistration) => void;\n\tonUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t\t\t\t\t\t\t'worker. To learn more, visit https://bit.ly/CRA-PWA'\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then((registration) => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing;\n\t\t\t\tif (installingWorker == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n\t\t\t\t\t\t\t\t\t'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error('Error during service worker registration:', error);\n\t\t});\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl, {\n\t\theaders: { 'Service-Worker': 'script' },\n\t})\n\t\t.then((response) => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get('content-type');\n\t\t\tif (\n\t\t\t\tresponse.status === 404 ||\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\n\t\t\t) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log(\n\t\t\t\t'No internet connection found. App is running in offline mode.'\n\t\t\t);\n\t\t});\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready\n\t\t\t.then((registration) => {\n\t\t\t\tregistration.unregister();\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error(error.message);\n\t\t\t});\n\t}\n}\n","import { createMuiTheme, MuiThemeProvider } from '@material-ui/core';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './App';\nimport { store } from './app/store';\nimport { Provider } from 'react-redux';\nimport * as serviceWorker from './serviceWorker';\n\nconst theme = createMuiTheme({});\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<MuiThemeProvider theme={theme}>\n\t\t\t<Provider store={store}>\n\t\t\t\t<App />\n\t\t\t</Provider>\n\t\t</MuiThemeProvider>\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}