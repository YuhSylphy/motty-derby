{"version":3,"sources":["features/family/components/FamilyDiagram.tsx","features/family/Family.tsx","features/errors/404.tsx","App.tsx","features/counter/counterSlice.ts","app/epics.ts","app/store.ts","serviceWorker.ts","index.tsx"],"names":["dummyDefs","name","sex","fatherName","motherName","FamilyDiagram","d3Container","useRef","defs","useMemo","data","nodes","Map","edges","forEach","def","set","label","class","has","push","v","w","Array","from","entries","prepareGraph","useEffect","g","dagreD3","Graph","setGraph","rankdir","setDefaultEdgeLabel","n","setNode","node","rx","ry","e","setEdge","render","svg","d3","current","svgGroup","append","zoom","on","attr","transform","call","xCenterOffset","Number","graph","width","className","height","ref","Family","Box","Typography","variant","Paper","Http404","Header","AppBar","position","Toolbar","IconButton","edge","color","aria-label","disabled","MenuOutlined","Footer","theme","useTheme","display","justifyContent","margin","spacing","Link","href","target","App","basename","process","Fragment","path","exact","to","counterSlice","createSlice","initialState","value","reducers","increment","state","decrement","incrementByAmount","action","payload","actions","rootEpic","combineEpics","action$","pipe","ignoreElements","epicMiddleware","createEpicMiddleware","dependencies","store","configureStore","reducer","counter","counterReducer","middleware","getDefaultMiddleware","thunk","concat","run","Boolean","window","location","hostname","match","createMuiTheme","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.650c70e6.chunk.js","sourcesContent":["import * as React from \"react\";\r\nimport { useEffect, useMemo, useRef } from \"react\";\r\nimport * as d3 from \"d3\";\r\nimport * as dagreD3 from \"dagre-d3\";\r\nimport * as graphlib from \"graphlib\";\r\n\r\nimport { HorseDef } from \"../core/horse\";\r\n\r\nimport \"./FamilyDiagram.css\";\r\nimport { Edge } from \"dagre-d3\";\r\n\r\nconst dummyDefs: HorseDef[] = [\r\n  { name: \"ロズウェルリポート\", sex: \"female\" },\r\n  {\r\n    name: \"モッティサイキョウ\",\r\n    sex: \"male\",\r\n    fatherName: \"パイロ\",\r\n    motherName: \"ロズウェルリポート\",\r\n  },\r\n  {\r\n    name: \"ステキマリオクン\",\r\n    sex: \"male\",\r\n    fatherName: \"ゴールドアリュール\",\r\n    motherName: \"ロズウェルリポート\",\r\n  },\r\n  {\r\n    name: \"ゴマプリン\",\r\n    sex: \"female\",\r\n    fatherName: \"ジョーカプチーノ\",\r\n    motherName: \"ロズウェルリポート\",\r\n  },\r\n  {\r\n    name: \"ミタラシダンゴ\",\r\n    sex: \"female\",\r\n    fatherName: \"ネオユニヴァース\",\r\n    motherName: \"ロズウェルリポート\",\r\n  },\r\n  {\r\n    name: \"カントリーマアム\",\r\n    sex: \"female\",\r\n    fatherName: \"マンハッタンカフェ\",\r\n    motherName: \"ロズウェルリポート\",\r\n  },\r\n  {\r\n    name: \"ルマンド\",\r\n    sex: \"female\",\r\n    fatherName: \"ダイワメジャー\",\r\n    motherName: \"ロズウェルリポート\",\r\n  },\r\n  {\r\n    name: \"モリナガノコエダ\",\r\n    sex: \"female\",\r\n    fatherName: \"ジョーカプチーノ\",\r\n    motherName: \"ロズウェルリポート\",\r\n  },\r\n  {\r\n    name: \"コーヒーゼリィ\",\r\n    sex: \"male\",\r\n    fatherName: \"ジョーカプチーノ\",\r\n    motherName: \"ロズウェルリポート\",\r\n  },\r\n  {\r\n    name: \"スウィートポテト\",\r\n    sex: \"female\",\r\n    fatherName: \"エンパイアメーカー\",\r\n    motherName: \"ゴマプリン\",\r\n  },\r\n  {\r\n    name: \"ムギチャ\",\r\n    sex: \"female\",\r\n    fatherName: \"ジョーカプチーノ\",\r\n    motherName: \"ロズウェルリポート\",\r\n  },\r\n  {\r\n    name: \"オレノオレオクッキ\",\r\n    sex: \"male\",\r\n    fatherName: \"ゴールドシップ\",\r\n    motherName: \"ゴマプリン\",\r\n  },\r\n  {\r\n    name: \"ペコチャン\",\r\n    sex: \"female\",\r\n    fatherName: \"ルーラーシップ\",\r\n    motherName: \"カントリーマアム\",\r\n  },\r\n  {\r\n    name: \"ピノ\",\r\n    sex: \"female\",\r\n    fatherName: \"アグネスデジタル\",\r\n    motherName: \"ゴマプリン\",\r\n  },\r\n  {\r\n    name: \"カブキアゲ\",\r\n    sex: \"male\",\r\n    fatherName: \"オルフェーブル\",\r\n    motherName: \"カントリーマアム\",\r\n  },\r\n];\r\n\r\nconst prepareGraph = (defs: HorseDef[]) => {\r\n  const nodes = new Map<string, dagreD3.Label>();\r\n  const edges: [Edge, dagreD3.Label][] = [];\r\n\r\n  defs.forEach((def) => {\r\n    // 定義された馬本体\r\n    nodes.set(def.name, {\r\n      label: def.name,\r\n      class: `owned ${def.sex}`,\r\n    });\r\n\r\n    // 母親\r\n    if (def.motherName) {\r\n      // 未登録なら非所持馬として追加\r\n      if (!nodes.has(def.motherName)) {\r\n        nodes.set(def.motherName, {\r\n          label: def.motherName,\r\n          class: \"anothers female\",\r\n        });\r\n      } else {\r\n        // TODO: 所持馬扱いに書き換える\r\n      }\r\n      edges.push([{ v: def.motherName, w: def.name }, { class: \"mother\" }]);\r\n    }\r\n\r\n    if (def.fatherName) {\r\n      if (!nodes.has(def.fatherName)) {\r\n        nodes.set(def.fatherName, {\r\n          label: def.fatherName,\r\n          class: \"anothers male\",\r\n        });\r\n      } else {\r\n        // TODO: 所持馬扱いに書き換える\r\n      }\r\n      edges.push([{ v: def.fatherName, w: def.name }, { class: \"father\" }]);\r\n    }\r\n  });\r\n\r\n  return { nodes: Array.from(nodes.entries()), edges };\r\n};\r\n\r\nexport const FamilyDiagram: React.FC = () => {\r\n  const d3Container = useRef<SVGSVGElement>(null!);\r\n\r\n  const defs = useMemo(() => dummyDefs, []);\r\n  const data = useMemo(() => prepareGraph(defs), [defs]);\r\n\r\n  useEffect(() => {\r\n    const g = new dagreD3.graphlib.Graph()\r\n      .setGraph({\r\n        rankdir: \"LR\",\r\n      })\r\n      .setDefaultEdgeLabel(() => ({}));\r\n\r\n    // Here we're setting nodeclass, which is used by our custom drawNodes function\r\n    // below.\r\n    data.nodes.forEach((n) => {\r\n      g.setNode(n[0], n[1]);\r\n    });\r\n\r\n    g.nodes().forEach(function (v) {\r\n      var node = g.node(v);\r\n      // Round the corners of the nodes\r\n      node.rx = node.ry = 5;\r\n    });\r\n\r\n    // Set up edges, no special attributes.\r\n    data.edges.forEach((e) => {\r\n      g.setEdge(e[0], e[1]);\r\n    });\r\n\r\n    // Create the renderer\r\n    var render = new dagreD3.render();\r\n    const svg = d3.select<SVGSVGElement, SVGSVGElement>(d3Container.current);\r\n    const svgGroup = svg.append(\"g\");\r\n\r\n    // Set up zoom support\r\n    const zoom = d3.zoom<SVGSVGElement, SVGSVGElement>().on(\"zoom\", () => {\r\n      svgGroup.attr(\"transform\", d3.event.transform);\r\n    });\r\n    svg.call(zoom);\r\n\r\n    // Run the renderer. This is what draws the final graph.\r\n    render(d3.select(\"svg g\"), (g as unknown) as graphlib.Graph);\r\n\r\n    // Center the graph\r\n    var xCenterOffset =\r\n      (Number(svg.attr(\"width\")) - (g.graph().width || 0)) / 2;\r\n    svgGroup.attr(\"transform\", \"translate(\" + xCenterOffset + \", 20)\");\r\n    // svg.attr(\"height\", (g.graph().height || 0) + 40);\r\n  }, [d3Container, data]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <svg\r\n        className=\"d3-component mottv-derby-family\"\r\n        width=\"100%\"\r\n        height=\"70vh\"\r\n        ref={d3Container}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n};\r\n","import { Box, Paper, Typography } from \"@material-ui/core\";\r\nimport * as React from \"react\";\r\nimport { FamilyDiagram } from \"./components/FamilyDiagram\";\r\n\r\nexport const Family: React.FC = () => {\r\n  return (\r\n    <Box>\r\n      <Typography variant=\"h4\">系図</Typography>\r\n      <Paper>\r\n        <FamilyDiagram />\r\n      </Paper>\r\n    </Box>\r\n  );\r\n};\r\n","import * as React from 'react';\r\n\r\nexport const Http404: React.FC = () => {\r\n    return <h2>404 NOT FOUND</h2>;\r\n}\r\n","import React from \"react\";\r\nimport \"./App.css\";\r\nimport { Redirect, Route, Switch } from \"react-router\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport { Family } from \"./features/family/Family\";\r\nimport { Http404 } from \"./features/errors/404\";\r\nimport {\r\n  AppBar,\r\n  Box,\r\n  IconButton,\r\n  Link,\r\n  Toolbar,\r\n  Typography,\r\n  useTheme,\r\n} from \"@material-ui/core\";\r\nimport { MenuOutlined } from \"@material-ui/icons\";\r\n\r\nconst Header: React.FC = () => {\r\n  return (\r\n    <AppBar position=\"static\">\r\n      <Toolbar>\r\n        <IconButton\r\n          edge=\"start\"\r\n          color=\"inherit\"\r\n          aria-label=\"menu\"\r\n          disabled={true}\r\n        >\r\n          <MenuOutlined />\r\n        </IconButton>\r\n        <Typography variant=\"h6\">MOTTV Derby</Typography>\r\n        {/* <Button color=\"inherit\">Login</Button> */}\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n};\r\n\r\nconst Footer: React.FC = () => {\r\n  const theme = useTheme();\r\n  return (\r\n    <Box display=\"flex\" justifyContent=\"flex-end\" margin={theme.spacing(0.2)}>\r\n      <Link href=\"https://www.youtube.com/user/MOTTYGAMES/\" target=\"__blank\">\r\n        MOTTV\r\n      </Link>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport const App: React.FC = () => {\r\n  const theme = useTheme();\r\n  return (\r\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n      <React.Fragment>\r\n        <Header />\r\n        <Box margin={theme.spacing(0.5)}>\r\n          <Switch>\r\n            <Route path=\"/family\">\r\n              <Family />\r\n            </Route>\r\n            <Route exact path=\"/\">\r\n              <Redirect to=\"/family\" />\r\n            </Route>\r\n            <Route>\r\n              <Http404 />\r\n            </Route>\r\n          </Switch>\r\n        </Box>\r\n        <Footer />\r\n      </React.Fragment>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { RootState } from '../../app/store';\r\n\r\ninterface CounterState {\r\n  value: number;\r\n}\r\n\r\nconst initialState: CounterState = {\r\n  value: 0,\r\n};\r\n\r\nexport const counterSlice = createSlice({\r\n  name: 'counter',\r\n  initialState,\r\n  reducers: {\r\n    increment: state => {\r\n      // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\r\n      // doesn't actually mutate the state because it uses the Immer library,\r\n      // which detects changes to a \"draft state\" and produces a brand new\r\n      // immutable state based off those changes\r\n      state.value += 1;\r\n    },\r\n    decrement: state => {\r\n      state.value -= 1;\r\n    },\r\n    // Use the PayloadAction type to declare the contents of `action.payload`\r\n    incrementByAmount: (state, action: PayloadAction<number>) => {\r\n      state.value += action.payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport const { increment, decrement, incrementByAmount } = counterSlice.actions;\r\n\r\n// The function below is called a thunk and allows us to perform async logic. It\r\n// can be dispatched like a regular action: `dispatch(incrementAsync(10))`. This\r\n// will call the thunk with the `dispatch` function as the first argument. Async\r\n// code can then be executed and other actions can be dispatched\r\n// export const incrementAsync = (amount: number): AppThunk => dispatch => {\r\n//   setTimeout(() => {\r\n//     dispatch(incrementByAmount(amount));\r\n//   }, 1000);\r\n// };\r\n\r\n// The function below is called a selector and allows us to select a value from\r\n// the state. Selectors can also be defined inline where they're used instead of\r\n// in the slice file. For example: `useSelector((state: RootState) => state.counter.value)`\r\nexport const selectCount = (state: RootState) => state.counter.value;\r\n\r\nexport default counterSlice.reducer;\r\n","import { combineEpics, Epic } from \"redux-observable\";\r\nimport { ignoreElements } from 'rxjs/operators';\r\n\r\nconst dummyEpic: Epic = (action$) => action$.pipe(ignoreElements());\r\n\r\nexport const rootEpic = combineEpics(dummyEpic);\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport { createEpicMiddleware } from \"redux-observable\";\r\nimport counterReducer from '../features/counter/counterSlice';\r\nimport { rootEpic } from './epics';\r\n\r\nconst dependencies = {};\r\nconst epicMiddleware = createEpicMiddleware({\r\n  dependencies\r\n})\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    counter: counterReducer,\r\n  },\r\n  middleware: (getDefaultMiddleware) => getDefaultMiddleware({\r\n    thunk: false\r\n  }).concat([epicMiddleware])\r\n});\r\nepicMiddleware.run(rootEpic);\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\nexport type Dependencies = typeof dependencies;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import { createMuiTheme, MuiThemeProvider } from '@material-ui/core';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport { App } from './App';\r\nimport { store } from './app/store';\r\nimport { Provider } from 'react-redux';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nconst theme = createMuiTheme({});\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <MuiThemeProvider theme={theme}>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </MuiThemeProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}